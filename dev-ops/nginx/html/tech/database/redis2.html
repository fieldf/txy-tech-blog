<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.67" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://vuepress-theme-hope-docs-demo.netlify.app/tech/database/redis2.html"><meta property="og:site_name" content="txy"><meta property="og:title" content="Redis(ä¸‹)"><meta property="og:description" content="å…¥é—¨ nosql not only sql é—®é¢˜ï¼š å…³ç³»å‹æ•°æ®åº“éš¾ä»¥å¯¹ä»˜é«˜å¹¶å‘ ç‰¹ç‚¹ï¼š æ–¹ä¾¿æ‰©å±• å¤§æ•°æ®é‡ã€é«˜æ€§èƒ½ æ•°æ®ç±»å‹å¤šæ · å…³ç³»å‹ ç»“æ„åŒ– SQL æ•°æ®å’Œå…³ç³»å•ç‹¬çš„è¡¨ä¸­ ä¸€è‡´æ€§ äº‹åŠ¡ nosql æ²¡æœ‰å›ºå®šæŸ¥è¯¢è¯­å¥ é”®å€¼å¯¹ã€åˆ—å­˜å‚¨ã€æ–‡æ¡£å­˜å‚¨ã€å›¾å½¢æ•°æ®åº“ æœ€ç»ˆä¸€è‡´æ€§ CAPå®šç†å’ŒBASEï¼ˆå¼‚åœ°å¤šæ´»ï¼‰ é«˜æ€§èƒ½ã€é«˜å¯ç”¨ã€é«˜æ‰©å±• åˆ†ç±» KVé”®å€¼å¯¹ï¼šredis æ–‡æ¡£å‹æ•°æ®åº“ mongodbï¼ˆbsonå’Œjsonä¸€æ ·ï¼‰ åŸºäºåˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨ åˆ—å­˜å‚¨æ•°æ®åº“ HBase åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ å›¾å…³ç³»æ•°æ®åº“ æ”¾çš„æ˜¯å…³ç³»ï¼Œæ¯”å¦‚æœ‹å‹åœˆç¤¾äº¤ç½‘ç»œã€å¹¿å‘Šæ¨è neo4jã€infogrid"><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="article:tag" content="æ•°æ®ç±»å‹"><meta property="article:tag" content="å“¨å…µæ¨¡å¼"><meta property="article:tag" content="redisé›†ç¾¤"><meta property="article:published_time" content="2023-02-12T00:00:00.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Redis(ä¸‹)","image":[""],"datePublished":"2023-02-12T00:00:00.000Z","dateModified":null,"author":[]}</script><title>Redis(ä¸‹) | txy</title><meta name="description" content="å…¥é—¨ nosql not only sql é—®é¢˜ï¼š å…³ç³»å‹æ•°æ®åº“éš¾ä»¥å¯¹ä»˜é«˜å¹¶å‘ ç‰¹ç‚¹ï¼š æ–¹ä¾¿æ‰©å±• å¤§æ•°æ®é‡ã€é«˜æ€§èƒ½ æ•°æ®ç±»å‹å¤šæ · å…³ç³»å‹ ç»“æ„åŒ– SQL æ•°æ®å’Œå…³ç³»å•ç‹¬çš„è¡¨ä¸­ ä¸€è‡´æ€§ äº‹åŠ¡ nosql æ²¡æœ‰å›ºå®šæŸ¥è¯¢è¯­å¥ é”®å€¼å¯¹ã€åˆ—å­˜å‚¨ã€æ–‡æ¡£å­˜å‚¨ã€å›¾å½¢æ•°æ®åº“ æœ€ç»ˆä¸€è‡´æ€§ CAPå®šç†å’ŒBASEï¼ˆå¼‚åœ°å¤šæ´»ï¼‰ é«˜æ€§èƒ½ã€é«˜å¯ç”¨ã€é«˜æ‰©å±• åˆ†ç±» KVé”®å€¼å¯¹ï¼šredis æ–‡æ¡£å‹æ•°æ®åº“ mongodbï¼ˆbsonå’Œjsonä¸€æ ·ï¼‰ åŸºäºåˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨ åˆ—å­˜å‚¨æ•°æ®åº“ HBase åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ å›¾å…³ç³»æ•°æ®åº“ æ”¾çš„æ˜¯å…³ç³»ï¼Œæ¯”å¦‚æœ‹å‹åœˆç¤¾äº¤ç½‘ç»œã€å¹¿å‘Šæ¨è neo4jã€infogrid">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-c9869e9f.css" as="style"><link rel="stylesheet" href="/assets/style-c9869e9f.css">
    <link rel="modulepreload" href="/assets/app-9393c1ef.js"><link rel="modulepreload" href="/assets/redis2.html-ee0ebcf4.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-c27b6911.js"><link rel="modulepreload" href="/assets/redis2.html-9556671e.js"><link rel="prefetch" href="/assets/index.html-735676f8.js" as="script"><link rel="prefetch" href="/assets/slides.html-4fecdfc5.js" as="script"><link rel="prefetch" href="/assets/index.html-7b53c495.js" as="script"><link rel="prefetch" href="/assets/newyear.html-944e487d.js" as="script"><link rel="prefetch" href="/assets/index.html-2e696d81.js" as="script"><link rel="prefetch" href="/assets/index.html-e6bb8217.js" as="script"><link rel="prefetch" href="/assets/index.html-83dc8332.js" as="script"><link rel="prefetch" href="/assets/day01.html-71cb9b95.js" as="script"><link rel="prefetch" href="/assets/day02.html-eded512f.js" as="script"><link rel="prefetch" href="/assets/day03.html-84f6dff3.js" as="script"><link rel="prefetch" href="/assets/day04.html-9a6869e1.js" as="script"><link rel="prefetch" href="/assets/day05.html-0e6c5a2c.js" as="script"><link rel="prefetch" href="/assets/day06.html-31c368d4.js" as="script"><link rel="prefetch" href="/assets/day07~day08.html-b7e430b5.js" as="script"><link rel="prefetch" href="/assets/day09~day10.html-2779454b.js" as="script"><link rel="prefetch" href="/assets/day11.html-822f418f.js" as="script"><link rel="prefetch" href="/assets/day12.html-7cf65a1c.js" as="script"><link rel="prefetch" href="/assets/index.html-c018a6c5.js" as="script"><link rel="prefetch" href="/assets/index.html-0c4fe786.js" as="script"><link rel="prefetch" href="/assets/day01.html-25640708.js" as="script"><link rel="prefetch" href="/assets/network.html-c0c0f609.js" as="script"><link rel="prefetch" href="/assets/os.html-06f53d64.js" as="script"><link rel="prefetch" href="/assets/index.html-c2a712aa.js" as="script"><link rel="prefetch" href="/assets/index.html-60367c18.js" as="script"><link rel="prefetch" href="/assets/javaBasic.html-fba82a8a.js" as="script"><link rel="prefetch" href="/assets/juc.html-fab3c0be.js" as="script"><link rel="prefetch" href="/assets/jvm.html-8c759bd6.js" as="script"><link rel="prefetch" href="/assets/test.html-cefe98dc.js" as="script"><link rel="prefetch" href="/assets/index.html-4d3ddefb.js" as="script"><link rel="prefetch" href="/assets/mysql.html-e8d916d6.js" as="script"><link rel="prefetch" href="/assets/redis1.html-d3f4f55c.js" as="script"><link rel="prefetch" href="/assets/index.html-a3b45a06.js" as="script"><link rel="prefetch" href="/assets/404.html-b4776d74.js" as="script"><link rel="prefetch" href="/assets/index.html-fc2f755f.js" as="script"><link rel="prefetch" href="/assets/index.html-74e26e5f.js" as="script"><link rel="prefetch" href="/assets/index.html-3ab584ef.js" as="script"><link rel="prefetch" href="/assets/index.html-85a9d1a5.js" as="script"><link rel="prefetch" href="/assets/index.html-6e464e0f.js" as="script"><link rel="prefetch" href="/assets/index.html-790dcb3a.js" as="script"><link rel="prefetch" href="/assets/index.html-d9317e05.js" as="script"><link rel="prefetch" href="/assets/index.html-f632a12d.js" as="script"><link rel="prefetch" href="/assets/index.html-58b086d3.js" as="script"><link rel="prefetch" href="/assets/index.html-29d51dba.js" as="script"><link rel="prefetch" href="/assets/index.html-3fce8ebd.js" as="script"><link rel="prefetch" href="/assets/index.html-4fa67ef4.js" as="script"><link rel="prefetch" href="/assets/index.html-a345065e.js" as="script"><link rel="prefetch" href="/assets/index.html-99676ec6.js" as="script"><link rel="prefetch" href="/assets/index.html-962f5db5.js" as="script"><link rel="prefetch" href="/assets/index.html-f032921f.js" as="script"><link rel="prefetch" href="/assets/index.html-59885d4a.js" as="script"><link rel="prefetch" href="/assets/index.html-db45e329.js" as="script"><link rel="prefetch" href="/assets/index.html-bd7cd013.js" as="script"><link rel="prefetch" href="/assets/index.html-e5107a9e.js" as="script"><link rel="prefetch" href="/assets/index.html-833a67e5.js" as="script"><link rel="prefetch" href="/assets/index.html-3ca41c9b.js" as="script"><link rel="prefetch" href="/assets/index.html-55f4ecb4.js" as="script"><link rel="prefetch" href="/assets/index.html-51ea9059.js" as="script"><link rel="prefetch" href="/assets/index.html-b861f507.js" as="script"><link rel="prefetch" href="/assets/index.html-9cf4f270.js" as="script"><link rel="prefetch" href="/assets/index.html-345340b0.js" as="script"><link rel="prefetch" href="/assets/index.html-554d1e33.js" as="script"><link rel="prefetch" href="/assets/index.html-60dd4134.js" as="script"><link rel="prefetch" href="/assets/index.html-25073f64.js" as="script"><link rel="prefetch" href="/assets/index.html-5c157547.js" as="script"><link rel="prefetch" href="/assets/index.html-bf1c749e.js" as="script"><link rel="prefetch" href="/assets/index.html-4de94123.js" as="script"><link rel="prefetch" href="/assets/index.html-ed3627f5.js" as="script"><link rel="prefetch" href="/assets/index.html-9b6d9a9f.js" as="script"><link rel="prefetch" href="/assets/index.html-20d8fb9b.js" as="script"><link rel="prefetch" href="/assets/index.html-a40f67a3.js" as="script"><link rel="prefetch" href="/assets/index.html-90976564.js" as="script"><link rel="prefetch" href="/assets/index.html-9a23dc1f.js" as="script"><link rel="prefetch" href="/assets/index.html-64e27dec.js" as="script"><link rel="prefetch" href="/assets/index.html-5789d2a3.js" as="script"><link rel="prefetch" href="/assets/index.html-47621742.js" as="script"><link rel="prefetch" href="/assets/index.html-5da90325.js" as="script"><link rel="prefetch" href="/assets/index.html-5128b590.js" as="script"><link rel="prefetch" href="/assets/index.html-75ba5bac.js" as="script"><link rel="prefetch" href="/assets/index.html-1e835183.js" as="script"><link rel="prefetch" href="/assets/index.html-a12bc44e.js" as="script"><link rel="prefetch" href="/assets/index.html-2f0298d3.js" as="script"><link rel="prefetch" href="/assets/index.html-1c2d577e.js" as="script"><link rel="prefetch" href="/assets/index.html-a3cb0e86.js" as="script"><link rel="prefetch" href="/assets/index.html-9a206450.js" as="script"><link rel="prefetch" href="/assets/index.html-51455f85.js" as="script"><link rel="prefetch" href="/assets/index.html-e6e37831.js" as="script"><link rel="prefetch" href="/assets/index.html-d9ccb502.js" as="script"><link rel="prefetch" href="/assets/index.html-6fd80673.js" as="script"><link rel="prefetch" href="/assets/index.html-f6bec4c8.js" as="script"><link rel="prefetch" href="/assets/slides.html-d64e1948.js" as="script"><link rel="prefetch" href="/assets/index.html-2ff2d4a8.js" as="script"><link rel="prefetch" href="/assets/newyear.html-358bd763.js" as="script"><link rel="prefetch" href="/assets/index.html-9ff6d28f.js" as="script"><link rel="prefetch" href="/assets/index.html-3f0c3990.js" as="script"><link rel="prefetch" href="/assets/index.html-f4fe70f8.js" as="script"><link rel="prefetch" href="/assets/day01.html-24bf1dcb.js" as="script"><link rel="prefetch" href="/assets/day02.html-761f8f70.js" as="script"><link rel="prefetch" href="/assets/day03.html-f07c33ca.js" as="script"><link rel="prefetch" href="/assets/day04.html-f29aa75c.js" as="script"><link rel="prefetch" href="/assets/day05.html-5e3bfd56.js" as="script"><link rel="prefetch" href="/assets/day06.html-4ac2da5b.js" as="script"><link rel="prefetch" href="/assets/day07~day08.html-b96173fa.js" as="script"><link rel="prefetch" href="/assets/day09~day10.html-ed4707ba.js" as="script"><link rel="prefetch" href="/assets/day11.html-d2269449.js" as="script"><link rel="prefetch" href="/assets/day12.html-bf0719ba.js" as="script"><link rel="prefetch" href="/assets/index.html-90474b36.js" as="script"><link rel="prefetch" href="/assets/index.html-84c47241.js" as="script"><link rel="prefetch" href="/assets/day01.html-66f75da8.js" as="script"><link rel="prefetch" href="/assets/network.html-a3ef0226.js" as="script"><link rel="prefetch" href="/assets/os.html-baf67430.js" as="script"><link rel="prefetch" href="/assets/index.html-5c6ee5b4.js" as="script"><link rel="prefetch" href="/assets/index.html-9b3976b5.js" as="script"><link rel="prefetch" href="/assets/javaBasic.html-c92458b8.js" as="script"><link rel="prefetch" href="/assets/juc.html-a19bf759.js" as="script"><link rel="prefetch" href="/assets/jvm.html-8a971d25.js" as="script"><link rel="prefetch" href="/assets/test.html-38fc3b83.js" as="script"><link rel="prefetch" href="/assets/index.html-7aa01566.js" as="script"><link rel="prefetch" href="/assets/mysql.html-962ff542.js" as="script"><link rel="prefetch" href="/assets/redis1.html-d8c015f2.js" as="script"><link rel="prefetch" href="/assets/index.html-3bf59523.js" as="script"><link rel="prefetch" href="/assets/404.html-e337e304.js" as="script"><link rel="prefetch" href="/assets/index.html-a2da1451.js" as="script"><link rel="prefetch" href="/assets/index.html-e6971261.js" as="script"><link rel="prefetch" href="/assets/index.html-0e6dc14d.js" as="script"><link rel="prefetch" href="/assets/index.html-2e4ea1db.js" as="script"><link rel="prefetch" href="/assets/index.html-45f8610e.js" as="script"><link rel="prefetch" href="/assets/index.html-ee19690d.js" as="script"><link rel="prefetch" href="/assets/index.html-ad54cf8d.js" as="script"><link rel="prefetch" href="/assets/index.html-8821feaa.js" as="script"><link rel="prefetch" href="/assets/index.html-64ff2a93.js" as="script"><link rel="prefetch" href="/assets/index.html-bd63af97.js" as="script"><link rel="prefetch" href="/assets/index.html-16ec6f1b.js" as="script"><link rel="prefetch" href="/assets/index.html-47fe3ac3.js" as="script"><link rel="prefetch" href="/assets/index.html-31fb0ddc.js" as="script"><link rel="prefetch" href="/assets/index.html-df2ba920.js" as="script"><link rel="prefetch" href="/assets/index.html-1b3ada3a.js" as="script"><link rel="prefetch" href="/assets/index.html-052d18d0.js" as="script"><link rel="prefetch" href="/assets/index.html-71c6344c.js" as="script"><link rel="prefetch" href="/assets/index.html-c54d71ff.js" as="script"><link rel="prefetch" href="/assets/index.html-cb9c0602.js" as="script"><link rel="prefetch" href="/assets/index.html-65493fe2.js" as="script"><link rel="prefetch" href="/assets/index.html-88a0f851.js" as="script"><link rel="prefetch" href="/assets/index.html-28c40db3.js" as="script"><link rel="prefetch" href="/assets/index.html-96bb39ec.js" as="script"><link rel="prefetch" href="/assets/index.html-3df23958.js" as="script"><link rel="prefetch" href="/assets/index.html-e66072f3.js" as="script"><link rel="prefetch" href="/assets/index.html-f9758f63.js" as="script"><link rel="prefetch" href="/assets/index.html-079d3c62.js" as="script"><link rel="prefetch" href="/assets/index.html-d77eb133.js" as="script"><link rel="prefetch" href="/assets/index.html-e4df272f.js" as="script"><link rel="prefetch" href="/assets/index.html-f77bb6a0.js" as="script"><link rel="prefetch" href="/assets/index.html-5854e2ad.js" as="script"><link rel="prefetch" href="/assets/index.html-6bb1b1e8.js" as="script"><link rel="prefetch" href="/assets/index.html-ccaf3f7f.js" as="script"><link rel="prefetch" href="/assets/index.html-18cc193f.js" as="script"><link rel="prefetch" href="/assets/index.html-81845fe1.js" as="script"><link rel="prefetch" href="/assets/index.html-11d5681d.js" as="script"><link rel="prefetch" href="/assets/index.html-4c134a8c.js" as="script"><link rel="prefetch" href="/assets/index.html-6f6bc1d6.js" as="script"><link rel="prefetch" href="/assets/index.html-410fbe68.js" as="script"><link rel="prefetch" href="/assets/index.html-15053da9.js" as="script"><link rel="prefetch" href="/assets/index.html-80291257.js" as="script"><link rel="prefetch" href="/assets/index.html-460742e0.js" as="script"><link rel="prefetch" href="/assets/index.html-90539982.js" as="script"><link rel="prefetch" href="/assets/index.html-07b32080.js" as="script"><link rel="prefetch" href="/assets/index.html-5f53554d.js" as="script"><link rel="prefetch" href="/assets/index.html-2699675a.js" as="script"><link rel="prefetch" href="/assets/index.html-427d5770.js" as="script"><link rel="prefetch" href="/assets/index.html-3d8e081c.js" as="script"><link rel="prefetch" href="/assets/index.html-e3493f7a.js" as="script"><link rel="prefetch" href="/assets/index.html-a51afc00.js" as="script"><link rel="prefetch" href="/assets/index.html-c84bbc9b.js" as="script"><link rel="prefetch" href="/assets/index.html-b67d5c11.js" as="script"><link rel="prefetch" href="/assets/index.html-a0a60b2e.js" as="script"><link rel="prefetch" href="/assets/index.html-bb36c0a9.js" as="script"><link rel="prefetch" href="/assets/index.html-c1372031.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-3ee328cd.js" as="script"><link rel="prefetch" href="/assets/pageview-bb00f2ea.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="vp-link vp-brand vp-brand" href="/"><img class="vp-nav-logo" src="/logo.svg" alt="txy"><!----><span class="vp-site-name hide-in-pad">txy</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><a aria-label="ä¸»é¡µ" class="vp-link nav-link nav-link" href="/"><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span>ä¸»é¡µ<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="æŠ€æœ¯"><span class="title"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span>æŠ€æœ¯</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a aria-label="è®¡ç®—æœºåŸºç¡€" class="vp-link nav-link nav-link" href="/tech/basic.html"><!---->è®¡ç®—æœºåŸºç¡€<!----></a></li><li class="dropdown-item"><a aria-label="ç®—æ³•" class="vp-link nav-link nav-link" href="/tech/algorithms.html"><!---->ç®—æ³•<!----></a></li><li class="dropdown-item"><a aria-label="æ•°æ®åº“" class="vp-link nav-link active nav-link active" href="/tech/database.html"><!---->æ•°æ®åº“<!----></a></li><li class="dropdown-item"><a aria-label="Java" class="vp-link nav-link nav-link" href="/tech/java.html"><!---->Java<!----></a></li><li class="dropdown-item"><a aria-label="å¤§æ•°æ®" class="vp-link nav-link nav-link" href="/tech/bigdata.html"><!---->å¤§æ•°æ®<!----></a></li><li class="dropdown-item"><a aria-label="ä¸­é—´ä»¶" class="vp-link nav-link nav-link" href="/tech/middleware.html"><!---->ä¸­é—´ä»¶<!----></a></li><li class="dropdown-item"><a aria-label="äº‘åŸç”Ÿ" class="vp-link nav-link nav-link" href="/tech/cloudnative.html"><!---->äº‘åŸç”Ÿ<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a aria-label="éšç¬”" class="vp-link nav-link nav-link" href="/essays.html"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span>éšç¬”<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="å­¦ä¹ ç¬”è®°"><span class="title"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span>å­¦ä¹ ç¬”è®°</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a aria-label="xxxé¡¹ç›®" class="vp-link nav-link nav-link" href="/notes/xxx.html"><!---->xxxé¡¹ç›®<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a aria-label="å…´è¶£çˆ±å¥½" class="vp-link nav-link nav-link" href="/hobbies.html"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span>å…´è¶£çˆ±å¥½<!----></a></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><div class="nav-item vp-repo"><a class="vp-repo-link" href="https://github.com/fuzhengwei/xfg-resume-blog" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><!--[--><a aria-label="æ•°æ®åº“" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/tech/database/"><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span>æ•°æ®åº“<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="MYSQL" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/tech/database/mysql.html"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>MYSQL<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="Redis(ä¸Š)" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/tech/database/redis1.html"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>Redis(ä¸Š)<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="Redis(ä¸‹)" class="vp-link nav-link active vp-sidebar-link vp-sidebar-page active nav-link active vp-sidebar-link vp-sidebar-page active" href="/tech/database/redis2.html"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>Redis(ä¸‹)<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="ä¸‹è½½" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/redis2.html#ä¸‹è½½"><!---->ä¸‹è½½<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="æ€§èƒ½æµ‹è¯•" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/redis2.html#æ€§èƒ½æµ‹è¯•"><!---->æ€§èƒ½æµ‹è¯•<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="å•çº¿ç¨‹ä¸ºä»€ä¹ˆå¿«" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/redis2.html#å•çº¿ç¨‹ä¸ºä»€ä¹ˆå¿«"><!---->å•çº¿ç¨‹ä¸ºä»€ä¹ˆå¿«<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="äº”å¤§æ•°æ®ç±»å‹" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/redis2.html#äº”å¤§æ•°æ®ç±»å‹"><!---->äº”å¤§æ•°æ®ç±»å‹<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="string" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/redis2.html#string"><!---->string<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="list" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/redis2.html#list"><!---->list<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="set" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/redis2.html#set"><!---->set<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="hash" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/redis2.html#hash"><!---->hash<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="zset" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/redis2.html#zset"><!---->zset<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="ä¸‰ç§ç‰¹å¾æ•°æ®ç±»å‹" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/redis2.html#ä¸‰ç§ç‰¹å¾æ•°æ®ç±»å‹"><!---->ä¸‰ç§ç‰¹å¾æ•°æ®ç±»å‹<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="geospatial" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/redis2.html#geospatial"><!---->geospatial<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="hyperloglog" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/redis2.html#hyperloglog"><!---->hyperloglog<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="bitmapä½å›¾" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/redis2.html#bitmapä½å›¾"><!---->bitmapä½å›¾<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="ç›‘è§†watch" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/redis2.html#ç›‘è§†watch"><!---->ç›‘è§†watch<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="jedis" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/redis2.html#jedis"><!---->jedis<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="springbootæ•´åˆredis" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/redis2.html#springbootæ•´åˆredis"><!---->springbootæ•´åˆredis<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="æŒä¹…åŒ–" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/redis2.html#æŒä¹…åŒ–"><!---->æŒä¹…åŒ–<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="æŒä¹…åŒ–" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/redis2.html#æŒä¹…åŒ–-1"><!---->æŒä¹…åŒ–<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="RDB" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/redis2.html#rdb"><!---->RDB<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="AOF" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/redis2.html#aof"><!---->AOF<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="å“ˆå¸Œæ§½" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/redis2.html#å“ˆå¸Œæ§½"><!---->å“ˆå¸Œæ§½<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="é›†ç¾¤æ­å»º" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/redis2.html#é›†ç¾¤æ­å»º"><!---->é›†ç¾¤æ­å»º<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>Redis(ä¸‹)</h1><div class="page-info"><!----><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-02-12T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 19 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT19M"></span><span class="page-category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item category3 clickable" role="navigation">Redis</span><!--]--><meta property="articleSection" content="Redis"></span><span class="page-tag-info" aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item tag0 clickable" role="navigation">æ•°æ®ç±»å‹</span><span class="page-tag-item tag2 clickable" role="navigation">å“¨å…µæ¨¡å¼</span><span class="page-tag-item tag2 clickable" role="navigation">redisé›†ç¾¤</span><!--]--><meta property="keywords" content="æ•°æ®ç±»å‹,å“¨å…µæ¨¡å¼,redisé›†ç¾¤"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#ä¸‹è½½">ä¸‹è½½</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#æ€§èƒ½æµ‹è¯•">æ€§èƒ½æµ‹è¯•</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#å•çº¿ç¨‹ä¸ºä»€ä¹ˆå¿«">å•çº¿ç¨‹ä¸ºä»€ä¹ˆå¿«</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#äº”å¤§æ•°æ®ç±»å‹">äº”å¤§æ•°æ®ç±»å‹</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#string">string</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#list">list</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#set">set</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#hash">hash</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#zset">zset</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#ä¸‰ç§ç‰¹å¾æ•°æ®ç±»å‹">ä¸‰ç§ç‰¹å¾æ•°æ®ç±»å‹</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#geospatial">geospatial</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#hyperloglog">hyperloglog</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#bitmapä½å›¾">bitmapä½å›¾</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#ç›‘è§†watch">ç›‘è§†watch</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#jedis">jedis</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#springbootæ•´åˆredis">springbootæ•´åˆredis</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#æŒä¹…åŒ–">æŒä¹…åŒ–</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#æŒä¹…åŒ–-1">æŒä¹…åŒ–</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#rdb">RDB</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#aof">AOF</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#å“ˆå¸Œæ§½">å“ˆå¸Œæ§½</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#é›†ç¾¤æ­å»º">é›†ç¾¤æ­å»º</a></li><!----><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><h1 id="å…¥é—¨" tabindex="-1"><a class="header-anchor" href="#å…¥é—¨" aria-hidden="true">#</a> å…¥é—¨</h1><p>nosql</p><ol><li>not only sql</li><li>é—®é¢˜ï¼š <ol><li>å…³ç³»å‹æ•°æ®åº“éš¾ä»¥å¯¹ä»˜é«˜å¹¶å‘</li></ol></li><li>ç‰¹ç‚¹ï¼š <ol><li>æ–¹ä¾¿æ‰©å±•</li><li>å¤§æ•°æ®é‡ã€é«˜æ€§èƒ½</li><li>æ•°æ®ç±»å‹å¤šæ ·</li></ol></li><li>å…³ç³»å‹ <ol><li>ç»“æ„åŒ–</li><li>SQL</li><li>æ•°æ®å’Œå…³ç³»å•ç‹¬çš„è¡¨ä¸­</li><li>ä¸€è‡´æ€§</li><li>äº‹åŠ¡</li></ol></li><li>nosql <ol><li>æ²¡æœ‰å›ºå®šæŸ¥è¯¢è¯­å¥</li><li>é”®å€¼å¯¹ã€åˆ—å­˜å‚¨ã€æ–‡æ¡£å­˜å‚¨ã€å›¾å½¢æ•°æ®åº“</li><li>æœ€ç»ˆä¸€è‡´æ€§</li><li>CAPå®šç†å’ŒBASEï¼ˆå¼‚åœ°å¤šæ´»ï¼‰</li><li>é«˜æ€§èƒ½ã€é«˜å¯ç”¨ã€é«˜æ‰©å±•</li></ol></li><li>åˆ†ç±» <ol><li>KVé”®å€¼å¯¹ï¼šredis</li><li>æ–‡æ¡£å‹æ•°æ®åº“ <ol><li>mongodbï¼ˆbsonå’Œjsonä¸€æ ·ï¼‰ <ol><li>åŸºäºåˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨</li></ol></li></ol></li><li>åˆ—å­˜å‚¨æ•°æ®åº“ <ol><li>HBase</li><li>åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ</li></ol></li><li>å›¾å…³ç³»æ•°æ®åº“ <ol><li>æ”¾çš„æ˜¯å…³ç³»ï¼Œæ¯”å¦‚æœ‹å‹åœˆç¤¾äº¤ç½‘ç»œã€å¹¿å‘Šæ¨è <ol><li>neo4jã€infogrid</li></ol></li></ol></li></ol></li></ol><p>redis</p><ol><li>remote dictionary server</li><li>å†…å­˜+å¯æŒä¹…æ—¥å¿—ï¼ˆRDB+AOFï¼‰</li><li>key-value</li><li>æ•ˆç‡é«˜</li><li>å‘å¸ƒè®¢é˜…ï¼Œé˜Ÿåˆ—</li><li>åœ°å›¾ä¿¡æ¯åˆ†æ</li><li>å¤šæ•°æ®ç±»å‹</li><li>é›†ç¾¤</li><li>äº‹åŠ¡</li></ol><h2 id="ä¸‹è½½" tabindex="-1"><a class="header-anchor" href="#ä¸‹è½½" aria-hidden="true">#</a> ä¸‹è½½</h2><ol><li>wget http://download.redis.io/releases/redis-6.0.6.tar.gz</li><li>è§£å‹ï¼štar -xzf redis-6.0.6.tar.gz</li><li>cd redis-6.0.6</li><li>make</li><li>æ‹·è´é…ç½®æ–‡ä»¶ <ol><li>cp ~/redis-6.0.6/redis.conf /usr/local/redis/bin/redis-conf/redis.conf</li></ol></li><li>å¯åŠ¨ï¼š <ol><li>src/redis-server redis-config/redis.conf</li></ol></li><li>æŸ¥çœ‹ <ol><li>ps -ef |grep redis</li></ol></li><li>å®¢æˆ·ç«¯ <ol><li>redis-cli -h 127.0.0.1 -p 6379</li></ol></li></ol><h2 id="æ€§èƒ½æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#æ€§èƒ½æµ‹è¯•" aria-hidden="true">#</a> æ€§èƒ½æµ‹è¯•</h2><ol><li>redis-benchmarkå®˜ç½‘è‡ªå¸¦çš„å‹åŠ›æµ‹è¯•å·¥å…·</li></ol><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/22839467/1672193139005-00d40479-99d8-42e3-af58-5cb974417772.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ol start="2"><li>ä½¿ç”¨æ–¹å¼ <ol><li>redis-benchmark -h 127.0.0.1 -p 6379 -c 100 -n 100000</li></ol></li></ol><h2 id="å•çº¿ç¨‹ä¸ºä»€ä¹ˆå¿«" tabindex="-1"><a class="header-anchor" href="#å•çº¿ç¨‹ä¸ºä»€ä¹ˆå¿«" aria-hidden="true">#</a> å•çº¿ç¨‹ä¸ºä»€ä¹ˆå¿«</h2><ol><li>å†…å­˜æ“ä½œ <ol><li>æ€§èƒ½ç“¶é¢ˆåœ¨å†…å­˜+å¸¦å®½ã€‚</li><li>ä¸åœ¨cpuï¼Œå› æ­¤ç”¨å•çº¿ç¨‹ã€‚</li></ol></li><li>å¤šçº¿ç¨‹éœ€è¦è¿›è¡Œcpuä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚</li><li>é‡‡ç”¨ç½‘ç»œIOå¤šè·¯å¤ç”¨ã€‚ <ol><li>å¤šè¿æ¥ä¿è¯é«˜ååé‡</li></ol></li><li>ä½¿ç”¨è·³è¡¨ã€é“¾è¡¨ã€åŠ¨æ€å­—ç¬¦ä¸²ã€å‹ç¼©åˆ—è¡¨å®ç°æ•°æ®ç»“æ„ã€‚æ•ˆç‡é«˜ã€‚</li></ol><h1 id="æ•°æ®ç±»å‹" tabindex="-1"><a class="header-anchor" href="#æ•°æ®ç±»å‹" aria-hidden="true">#</a> æ•°æ®ç±»å‹</h1><h2 id="äº”å¤§æ•°æ®ç±»å‹" tabindex="-1"><a class="header-anchor" href="#äº”å¤§æ•°æ®ç±»å‹" aria-hidden="true">#</a> äº”å¤§æ•°æ®ç±»å‹</h2><ol><li>æ–‡æ¡£ <ol><li>http://www.redis.cn/commands.html</li></ol></li><li>æ•°æ®ç±»å‹æŒ‡çš„æ˜¯value</li></ol><h3 id="string" tabindex="-1"><a class="header-anchor" href="#string" aria-hidden="true">#</a> string</h3><p>å‘½ä»¤</p><ol><li>keys *</li><li>exists name <ol><li><blockquote><p>=1å­˜åœ¨ï¼Œ&lt;=0ä¸å­˜åœ¨</p></blockquote></li></ol></li><li>move name 1ï¼šè¿ç§»åˆ°æ•°æ®åº“1</li><li>select 1ï¼šä½¿ç”¨æ•°æ®åº“1</li><li>set name yyyy <ol><li>expire name 10 <ol><li>ttl name</li></ol></li><li>get name</li><li>append name &quot;hello&quot; #è¿½åŠ </li><li>strlen name</li></ol></li><li>set views 1 <ol><li>incr views # è‡ªå¢1</li><li>decr views # è‡ªå‡1</li><li>incrby views 2 # è‡ªå¢2</li><li>decrby views 2 # è‡ªå‡2</li></ol></li><li>set key1 &quot;hello world&quot; <ol><li>getrange key1 0 4</li><li>getrange key1 0 -1ï¼š-1ä»£è¡¨å°¾éƒ¨</li><li>setrange key1 1 xxï¼šä»eæ›¿æ¢æˆxxå¾—åˆ°hxxlo world</li></ol></li><li>setex <ol><li>è®¾ç½®è¿‡æœŸæ—¶é—´</li><li>setex key4 10 value4 # 10ç§’é’Ÿ</li></ol></li><li>setnx <ol><li>ä¸å­˜åœ¨å†è®¾ç½®</li><li>setnx key1 value1ï¼šå¦‚æœkey1å­˜åœ¨è®¾ç½®ä¸æˆåŠŸã€‚</li><li>setnx key2 value1ï¼škey2ä¸å­˜åœ¨ï¼Œè®¾ç½®æˆåŠŸï¼Œè¿”å›1.</li></ol></li><li>msetå’Œmget <ol><li>mset k1 v1 k2 v2 k3 v3</li><li>mget k1 k2 k3</li><li>msetnx k1 v1 k4 v4 <ol><li>åŸå­æ€§ï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ã€‚</li></ol></li></ol></li><li>getsetï¼šå…ˆgetåset <ol><li>getset db redis # å¦‚æœä¸å­˜åœ¨ï¼Œè¿”å›nilï¼Œå¹¶è®¾ç½®å€¼ã€‚</li><li>getset db mongodb # å¦‚æœå­˜åœ¨ï¼Œè¿”å›redisï¼Œå¹¶è®¾ç½®mongodb</li></ol></li><li>type nameï¼šç±»å‹</li><li>ä¸¾ä¾‹ï¼š 1.<div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>set user:1 {name:zhangsan, age:3}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><pre><code>1. ä¿å­˜ä¸€ä¸ªå¯¹è±¡ã€‚
</code></pre></li></ol><h3 id="list" tabindex="-1"><a class="header-anchor" href="#list" aria-hidden="true">#</a> list</h3><p>ç”¨é€”</p><ol><li>ç”¨åšæ ˆã€é˜Ÿåˆ—ã€é˜»å¡é˜Ÿåˆ—</li><li>æ ˆ <ol><li>å·¦è¿›å·¦å‡º</li></ol></li><li>é˜Ÿåˆ— <ol><li>å·¦è¿›å³å‡º</li></ol></li></ol><p>å‘½ä»¤</p><ol><li>lpush list one <ol><li>lpush list two</li><li>lrange list 0 -1ï¼štwo one</li><li>rpush list zero</li></ol></li><li>lpop list <ol><li>rpop list</li></ol></li><li>lindex list 0</li><li>llen list</li><li>lrem list 2 value4 <ol><li>ä»å·¦èµ·åˆ é™¤ä¸¤ä¸ªvalue4</li></ol></li><li>ltrim list 1 2 <ol><li>åªä¿ç•™1åˆ°2çš„æ•°æ®ã€‚</li></ol></li><li>rpoplpush mylist myotherlist <ol><li>lrange mylist 0 -1 <ol><li>hello1 hello2 hello3</li></ol></li><li>ç§»é™¤åˆ—è¡¨æœ€åä¸€ä¸ªå…ƒç´ ï¼Œç§»åŠ¨åˆ°æ–°çš„åˆ—è¡¨ä¸­</li><li>lrange mylist 0 -1 <ol><li>hello1 hello2</li></ol></li><li>lrange myother list 0 -1 <ol><li>hello3</li></ol></li></ol></li><li>lset <ol><li>åˆ—è¡¨ä¸­æŒ‡å®šä¸‹æ ‡çš„å€¼æ›¿æ¢ä¸ºå¦ä¸€ä¸ªå€¼ï¼Œæ›´æ–°æ“ä½œ</li><li>lset list 0 itemï¼šå¦‚æœåˆ—è¡¨ä¸å­˜åœ¨ï¼Œåˆ™æŠ¥é”™ã€‚</li></ol></li><li>linsert <ol><li>linsert list before|after value3 value4</li><li>åœ¨value3çš„å‰é¢æˆ–åé¢æ’å…¥value4ã€‚</li></ol></li></ol><h3 id="set" tabindex="-1"><a class="header-anchor" href="#set" aria-hidden="true">#</a> set</h3><p>ç»“æ„</p><ol><li>hashç»“æ„</li></ol><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/22839467/1672216075092-ac79e261-2e0d-4f62-a955-1d3256385256.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>å‘½ä»¤</p><ol><li>sadd set hello world</li><li>smembers set <ol><li>è¿”å›seté›†åˆä¸­çš„å…ƒç´ </li></ol></li><li>sismember set hello <ol><li>helloåœ¨ä¸åœ¨é›†åˆä¸­ï¼Œè¿”å›1</li></ol></li><li>scard set <ol><li>è·å–é›†åˆå…ƒç´ ä¸ªæ•°</li></ol></li><li>srem set world <ol><li>ç§»é™¤worldå…ƒç´ </li></ol></li><li>srandmember set <ol><li>éšæœºæŠ½å–ä¸€ä¸ªå…ƒç´ </li><li>srandmember set 2 <ol><li>éšæœºæŠ½å–2ä¸ªå…ƒç´ ã€‚</li></ol></li></ol></li><li>spop set <ol><li>éšæœºåˆ é™¤ä¸€ä¸ªå…ƒç´ ã€‚</li></ol></li><li>smove set setother &quot;kkk&quot; <ol><li>å°†kkkç§»åŠ¨åˆ°setotheré›†åˆä¸­ã€‚</li></ol></li><li>sdiff key1 key2 <ol><li>key1å’Œkey2çš„å·®é›†ï¼Œkey1-key2</li></ol></li><li>sinter key1 key2 <ol><li>äº¤é›†</li></ol></li><li>sunion key1 key2 <ol><li>å¹¶é›†</li></ol></li></ol><h3 id="hash" tabindex="-1"><a class="header-anchor" href="#hash" aria-hidden="true">#</a> hash</h3><ol><li>key field value</li></ol><p>å‘½ä»¤</p><ol><li>hset myhash field xxx</li><li>hget myhash field</li><li>hmset myhash k1 v1 k2 v2</li><li>hmset myhash k1 k2</li><li>hgetall myhashï¼ˆæ…ç”¨ï¼‰ <ol><li>è·å–æ‰€æœ‰keyå’Œvalue</li></ol></li><li>hlen myhash <ol><li>è·å–é•¿åº¦</li></ol></li><li>hexists myhash field1 <ol><li>æ˜¯å¦å­˜åœ¨keyï¼Œå­˜åœ¨1</li></ol></li><li>hkeys myhash <ol><li>è·å–æ‰€æœ‰key</li></ol></li><li>hvals myhash <ol><li>è·å–æ‰€æœ‰value</li></ol></li><li>hincrby hash1 field1 1 <ol><li>hget hash1 field1ï¼š1</li></ol></li><li>hsetnx hash2 field1 value1 <ol><li>ä¸å­˜åœ¨è®¾ç½®æˆåŠŸ</li></ol></li></ol><h3 id="zset" tabindex="-1"><a class="header-anchor" href="#zset" aria-hidden="true">#</a> zset</h3><p>è¯­æ³•</p><ol><li>zadd key score value</li><li>zadd myset 1 one</li><li>zadd myset 2 two 3 three</li><li>zrange myset 0 -1 <ol><li>one two three</li><li>zrange myset 0 -1 WITHSCORES</li><li>åå‘æ’åˆ— <ol><li>zrevrange myset 0 -1 WITHSCORES</li></ol></li></ol></li><li>zrangebyscore zset 15 22 <ol><li>æ ¹æ®scoreèŒƒå›´æ‹¿å‡ºå€¼ã€‚</li></ol></li><li>zrem myset oneï¼šç§»é™¤one</li><li>zcard mysetï¼šé›†åˆå…ƒç´ ä¸ªæ•°</li><li>zcound myset 15 22ï¼šæŸ¥è¯¢å…ƒç´ scoreåœ¨15åˆ°22åŒºé—´çš„count</li></ol><h2 id="ä¸‰ç§ç‰¹å¾æ•°æ®ç±»å‹" tabindex="-1"><a class="header-anchor" href="#ä¸‰ç§ç‰¹å¾æ•°æ®ç±»å‹" aria-hidden="true">#</a> ä¸‰ç§ç‰¹å¾æ•°æ®ç±»å‹</h2><h3 id="geospatial" tabindex="-1"><a class="header-anchor" href="#geospatial" aria-hidden="true">#</a> geospatial</h3><ol><li>geoadd china:city 116.40 39.90 beijing</li><li>geoadd china:city 121.47 31.23 shanghai</li><li>geoadd china:city 106.50 29.53 chongqing 114.05 22.52 shenzhen</li><li>geoadd china:city 120.16 30.24 hangzhou 108.96 34.26 xian</li><li>è·å–å½“å‰åæ ‡ <ol><li>geopos china:city beijing</li></ol></li><li>è·å–ä¸¤ä¸ªä½ç½®è·ç¦» <ol><li>geodist china:city beijing shanghai km</li><li>m km miè‹±é‡Œ ftè‹±å°º</li></ol></li><li>ä»¥ç»™å®šçš„ç»çº¬åº¦ä¸ºä¸­å¿ƒï¼Œæ‰¾å‡ºæŸä¸€åŠå¾„å†…çš„å…ƒç´  <ol><li>georadius china:city 110 30 1000km</li><li>withcoord æ˜¾ç¤ºå®šä½ä¿¡æ¯</li><li>withdist æ˜¾ç¤ºåˆ°ä¸­å¿ƒç‚¹è·ç¦»</li><li>count 1 æŒ‡å®šæ•°é‡</li></ol></li><li>æ‰¾æŒ‡å®šå…ƒç´ å‘¨å›´çš„å…¶ä»–å…ƒç´  <ol><li>georadiusbymember china:city shanghai 1000 km <ol><li>hangzhou</li><li>shanghai</li></ol></li></ol></li><li>zrange china:city 0 -1</li></ol><h3 id="hyperloglog" tabindex="-1"><a class="header-anchor" href="#hyperloglog" aria-hidden="true">#</a> hyperloglog</h3><p>UVï¼šæ ¹æ®ipåˆ¤æ–­ã€‚ä¸€å¤©å†…åŒä¸€ä¸ªè®¿å®¢ä»…è¢«è®¡ç®—ä¸€æ¬¡ã€‚</p><p>ä¼˜ç‚¹ï¼š</p><ol><li>å ç”¨å†…å­˜å°12KB</li><li>æœ‰0.81%é”™è¯¯ç‡ã€‚</li></ol><p>å‘½ä»¤ï¼š</p><ol><li>pfadd mykey a b c d e f g h i j</li><li>pfcount mykey</li><li>pfmerge mykey3 mykey mykey2 <ol><li>åˆå¹¶mykeyå’Œmykey2=&gt;mykey3</li></ol></li></ol><h3 id="bitmapä½å›¾" tabindex="-1"><a class="header-anchor" href="#bitmapä½å›¾" aria-hidden="true">#</a> bitmapä½å›¾</h3><ol><li>è¡¨ç¤ºæŸä¸ªå…ƒç´ å¯¹åº”çš„å€¼ï¼Œæˆ–0æˆ–1.</li><li>æ‰“å¡ <ol><li>setbit sign 0 1 # å‘¨ä¸€æ‰“å¡äº†</li><li>setbit sign 1 0 # å‘¨äºŒæ²¡æ‰“å¡</li><li>setbit sign 2 0 # å‘¨ä¸‰æœªæ‰“å¡</li><li>getbit sign 2ï¼šå‘¨ä¸‰æ‰“å¡äº†å—ï¼Ÿ</li><li>bitcount signï¼šç»Ÿè®¡æ‰“å¡çš„æ•°é‡ã€‚</li></ol></li></ol><h1 id="äº‹åŠ¡" tabindex="-1"><a class="header-anchor" href="#äº‹åŠ¡" aria-hidden="true">#</a> äº‹åŠ¡</h1><p>redisäº‹åŠ¡æœ¬è´¨</p><ol><li>ä¸€ç»„å‘½ä»¤çš„é›†åˆã€‚</li><li>æŒ‰é¡ºåºæ‰§è¡Œã€‚</li><li>ä¸€æ¬¡æ€§ã€é¡ºåºæ€§ã€æ’ä»–æ€§çš„æ‰§è¡Œä¸€ç»„å‘½ä»¤ã€‚</li><li>å•æ¡å‘½ä»¤ä¿è¯åŸå­æ€§ï¼Œäº‹åŠ¡ä¸ä¿è¯åŸå­æ€§ã€‚</li><li>å¦‚æœå‘½ä»¤æœ‰é”™ï¼Œäº‹åŠ¡ä¸­æ‰€æœ‰å‘½ä»¤éƒ½ä¸ä¼šè¢«æ‰§è¡Œã€‚</li><li>å¦‚æœå‘½ä»¤æ‰§è¡Œç»“æœæŠ¥é”™ï¼Œå…¶ä»–å‘½ä»¤å¯ä»¥æ­£å¸¸æ‰§è¡Œï¼Œé”™è¯¯å‘½ä»¤æŠ›å‡ºå¼‚å¸¸ã€‚</li></ol><p>äº‹åŠ¡å‘½ä»¤</p><ol><li>å¼€å¯äº‹åŠ¡ï¼šmulti</li><li>å‘½ä»¤å…¥é˜Ÿ</li><li>æ‰§è¡Œäº‹åŠ¡ï¼šexec</li><li>æ’¤é”€äº‹åŠ¡ï¼šdiscard</li></ol><p>ä»£ç ï¼š</p><ol><li>multi</li><li>set k1 v1</li><li>set k2 v2</li><li>get k2</li><li>set k3 v3</li><li>exec</li></ol><h2 id="ç›‘è§†watch" tabindex="-1"><a class="header-anchor" href="#ç›‘è§†watch" aria-hidden="true">#</a> ç›‘è§†watch</h2><ol><li>æ‚²è§‚é” <ol><li>æ‚²è§‚ï¼Œæ— è®ºä»€ä¹ˆæ—¶å€™éƒ½ä¼šåŠ é”ã€‚</li><li>å½±å“æ•ˆç‡ï¼Œå®é™…æƒ…å†µä¸€èˆ¬ä½¿ç”¨ä¹è§‚é”ã€‚</li></ol></li><li>ä¹è§‚é” <ol><li>ä¹è§‚ï¼Œè®¤ä¸ºä»€ä¹ˆæ—¶å€™éƒ½ä¸ä¼šå‡ºç°é—®é¢˜ã€‚</li><li>ä¸ä¸Šé”ã€‚æ›´æ–°æ•°æ®çš„æ—¶å€™ä¼šåˆ¤æ–­ä¸€ä¸‹ï¼Œåœ¨æ­¤æœŸé—´æ˜¯å¦ä¿®æ”¹è¿‡ç›‘è§†çš„æ•°æ®ã€‚</li></ol></li></ol><p>watchä½œç”¨</p><ol><li>ç›‘æ§1æˆ–å¤šä¸ªkeyã€‚</li><li>ä¸€æ—¦å…¶ä¸­ä¸€ä¸ªkeyè¢«ä¿®æ”¹(æˆ–åˆ é™¤)ï¼Œä¹‹åçš„äº‹åŠ¡å°±ä¸æ‰§è¡Œã€‚</li><li>ç›‘æ§æŒç»­åˆ°execå‘½ä»¤ã€‚</li></ol><p>è½¬è´¦ä¸¾ä¾‹</p><ol><li>set money 300</li><li>set out 200</li><li>watch money</li><li>multi</li><li>decrby money 20</li><li>incrby out 20</li><li>å¦ä¸€ä¸ªçº¿ç¨‹è®¾ç½®set money 200</li><li>execï¼Œäº‹åŠ¡æ²¡æœ‰æ‰§è¡ŒæˆåŠŸã€‚</li></ol><p>å¦‚æœä¿®æ”¹å¤±è´¥ï¼Œé‡æ–°ç›‘æ§è·å–æœ€æ–°å€¼</p><ol><li>UNWATCHå…ˆè§£é”</li><li>WATCH money # è·å–æœ€æ–°çš„å€¼ï¼Œç›¸å½“äºmysqlçš„select version</li><li>multi</li><li>DECRBY money</li><li>INCRBY out</li><li>exec # æ‰§è¡Œæ—¶ä¼šå¯¹æ¯”ç›‘è§†çš„å€¼ï¼Œå¦‚æœå‘ç”Ÿå˜åŒ–ä¼šæ‰§è¡Œå¤±è´¥ã€‚</li></ol><h2 id="jedis" tabindex="-1"><a class="header-anchor" href="#jedis" aria-hidden="true">#</a> jedis</h2><p>ä»‹ç»ï¼š</p><ol><li>javaæ“ä½œredisçš„å·¥å…·ã€‚</li><li>rediså®˜æ–¹æ¨èã€‚</li></ol><p>æ­¥éª¤</p><ol><li>ä¾èµ–</li></ol><!----><!----><ol start="2"><li>åˆ›å»ºJedis <ol><li>Jedis jedis=new Jedis(&quot;localhost&quot;, 6379)</li><li>System.out.println(jedis.ping()); // PONG</li></ol></li><li>jediså®ç°äº‹åŠ¡</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Jedis</span> jedis<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Jedis</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token number">6379</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//        System.out.println(jedis.ping());</span>
    jedis<span class="token punctuation">.</span><span class="token function">flushDB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">JSONObject</span> jsonObject<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">JSONObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    jsonObject<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    jsonObject<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// å¼€å¯äº‹åŠ¡</span>
    <span class="token class-name">Transaction</span> multi<span class="token operator">=</span>jedis<span class="token punctuation">.</span><span class="token function">multi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> result<span class="token operator">=</span>jsonObject<span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        multi<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;user1&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        multi<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;user2&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">0</span><span class="token punctuation">;</span>
        multi<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‰§è¡Œäº‹åŠ¡</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        multi<span class="token punctuation">.</span><span class="token function">discard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//æ”¾å¼ƒäº‹åŠ¡</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jedis<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;user1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jedis<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;user2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    	jedis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><pre><code>1. å‡ºç°äº†å¼‚å¸¸ï¼Œè¿›å…¥catchï¼Œæ”¾å¼ƒäº‹åŠ¡ï¼Œä¸¤ä¸ªå‘½ä»¤éƒ½æ²¡æœ‰æ‰§è¡Œã€‚
</code></pre><h2 id="springbootæ•´åˆredis" tabindex="-1"><a class="header-anchor" href="#springbootæ•´åˆredis" aria-hidden="true">#</a> springbootæ•´åˆredis</h2><p>ä¾èµ–</p><ol><li></li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>  
   <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>  
   <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>spring<span class="token operator">-</span>boot<span class="token operator">-</span>starter<span class="token operator">-</span>data<span class="token operator">-</span>redis<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>  
<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>springboot2.xä¹‹åï¼ŒåŸæ¥çš„jedisè¢«æ›¿æ¢ä¸ºlettuceã€‚ <ol><li>lettuceï¼šé‡‡ç”¨nettyã€‚æ›´åƒNIOã€‚</li><li>jedisï¼šé‡‡ç”¨çš„ç›´è¿ï¼Œæ›´åƒBIOã€‚</li></ol></li><li>springbootæ‰€æœ‰çš„é…ç½®ç±»ï¼Œéƒ½æœ‰ä¸€ä¸ªè‡ªåŠ¨é…ç½®ç±»ã€‚ <ol><li>RedisTemplate</li></ol></li><li>è‡ªåŠ¨é…ç½®ç±»éƒ½ç»‘å®šä¸€ä¸ªpropertiesé…ç½®æ–‡ä»¶ã€‚ <ol><li>RedisProperties</li></ol></li><li>é…ç½®è¿æ¥ <ol><li>spring.redis.host=127.0.0.1</li><li>spring.redis.port=6379</li></ol></li><li>ä»£ç  <ol><li>@Autowired<br> private RedisTemplate redisTemplate;<br> @Autowired<br> private StringRedisTemplate stringRedisTemplate;<br> public void test() {<br> redisTemplate.opsForValue().set(&quot;mszlu&quot;,&quot;hello&quot;);<br> stringRedisTemplate.opsForValue().set(&quot;stringmszlu&quot;, &quot;hello string&quot;);<br> System.out.println(redisTemplate.opsForValue().get(&quot;mszlu&quot;)); System.out.println(stringRedisTemplate.opsForValue().get(&quot;stringmszlu&quot;));<br> }</li></ol></li><li>è‡ªå®šä¹‰åºåˆ—åŒ–é…ç½®</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
* ç¼–å†™çš„è‡ªå·±çš„ RedisTemplate
*/</span>
<span class="token annotation punctuation">@Configuration</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RedisConfig</span> <span class="token punctuation">{</span>

        <span class="token annotation punctuation">@Bean</span>
        <span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">&quot;all&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">public</span> <span class="token class-name">RedisTemplate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">redisTemplate</span><span class="token punctuation">(</span><span class="token class-name">RedisConnectionFactory</span> redisConnectionFactory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// ä¸ºäº†å¼€å‘æ–¹ä¾¿ï¼Œä¸€èˆ¬ä½¿ç”¨ &lt;String, Object&gt;</span>
            <span class="token class-name">RedisTemplate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> template <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RedisTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            template<span class="token punctuation">.</span><span class="token function">setConnectionFactory</span><span class="token punctuation">(</span>redisConnectionFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// åºåˆ—åŒ–é…ç½®</span>
            <span class="token class-name">Jackson2JsonRedisSerializer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> jackson2JsonRedisSerializer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jackson2JsonRedisSerializer</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">ObjectMapper</span> om <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            om<span class="token punctuation">.</span><span class="token function">setVisibility</span><span class="token punctuation">(</span><span class="token class-name">PropertyAccessor</span><span class="token punctuation">.</span><span class="token constant">ALL</span><span class="token punctuation">,</span> <span class="token class-name">JsonAutoDetect<span class="token punctuation">.</span>Visibility</span><span class="token punctuation">.</span><span class="token constant">ANY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            om<span class="token punctuation">.</span><span class="token function">enableDefaultTyping</span><span class="token punctuation">(</span><span class="token class-name">ObjectMapper<span class="token punctuation">.</span>DefaultTyping</span><span class="token punctuation">.</span><span class="token constant">NON_FINAL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            jackson2JsonRedisSerializer<span class="token punctuation">.</span><span class="token function">setObjectMapper</span><span class="token punctuation">(</span>om<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// String çš„åºåˆ—åŒ–</span>
            <span class="token class-name">StringRedisSerializer</span> stringRedisSerializer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringRedisSerializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// key é‡‡ç”¨ String çš„åºåˆ—åŒ–æ–¹å¼</span>
            template<span class="token punctuation">.</span><span class="token function">setKeySerializer</span><span class="token punctuation">(</span>stringRedisSerializer<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// hash çš„ key ä¹Ÿé‡‡ç”¨ String çš„åºåˆ—åŒ–æ–¹å¼</span>
            template<span class="token punctuation">.</span><span class="token function">setHashKeySerializer</span><span class="token punctuation">(</span>stringRedisSerializer<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// value åºåˆ—åŒ–æ–¹å¼é‡‡ç”¨ Jackson</span>
            template<span class="token punctuation">.</span><span class="token function">setValueSerializer</span><span class="token punctuation">(</span>jackson2JsonRedisSerializer<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// hash çš„ value åºåˆ—åŒ–æ–¹å¼é‡‡ç”¨ Jackson</span>
            template<span class="token punctuation">.</span><span class="token function">setHashKeySerializer</span><span class="token punctuation">(</span>jackson2JsonRedisSerializer<span class="token punctuation">)</span><span class="token punctuation">;</span>
            template<span class="token punctuation">.</span><span class="token function">afterPropertiesSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">return</span> template<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="redisé…ç½®æ–‡ä»¶å’ŒæŒä¹…åŒ–" tabindex="-1"><a class="header-anchor" href="#redisé…ç½®æ–‡ä»¶å’ŒæŒä¹…åŒ–" aria-hidden="true">#</a> redisé…ç½®æ–‡ä»¶å’ŒæŒä¹…åŒ–</h1><h2 id="æŒä¹…åŒ–" tabindex="-1"><a class="header-anchor" href="#æŒä¹…åŒ–" aria-hidden="true">#</a> æŒä¹…åŒ–</h2><p>åœæ­¢è¿›ç¨‹ï¼š</p><ol><li>kill -9 å·</li></ol><p>networkç½‘ç»œ</p><ol><li>bind 127.0.0.1 # ç»‘å®šçš„ipåªæœ‰127.0.0.1å¯ä»¥è®¿é—®redisæœåŠ¡ï¼Œ0.0.0.0ä»£è¡¨æ‰€æœ‰ipéƒ½å¯ä»¥è®¿é—®ã€‚</li><li>protected-mode no # ä¿æŠ¤æ¨¡å¼</li><li>port 6379 # ç«¯å£è®¾ç½®</li></ol><p>general</p><ol><li>deamonize yes # å®ˆæŠ¤è¿›ç¨‹æ–¹å¼å¯åŠ¨ã€‚</li><li>pidfile /var/run/redis_6379.pid # å¦‚æœåå°å¯åŠ¨ï¼Œæˆ‘ä»¬éœ€è¦æŒ‡å®šä¸€ä¸ªpidæ–‡ä»¶ã€‚</li><li>loglevel debug|verbose|notice|warning</li><li>logfile &quot;&quot; # æ—¥å¿—æ–‡ä»¶çš„ä½ç½®</li><li>databases 16 # æ•°æ®åº“çš„æ•°é‡ï¼Œé»˜è®¤16</li><li>always-show-logo yes # æ˜¯å¦æ€»æ˜¯æ˜¾ç¤ºLOGO</li></ol><p>æŒä¹…åŒ–/å¿«ç…§é…ç½®rdb</p><ol><li>save 900 1 <ol><li>å¦‚æœ900så†…ï¼Œè‡³å°‘æœ‰1ä¸ªkeyè¿›è¡Œäº†ä¿®æ”¹ï¼Œè¿›è¡ŒæŒä¹…åŒ–æ“ä½œã€‚</li></ol></li><li>save 300 10 <ol><li>å¦‚æœ300så†…ï¼Œè‡³å°‘æœ‰10ä¸ªkeyè¿›è¡Œäº†ä¿®æ”¹ï¼Œè¿›è¡ŒæŒä¹…åŒ–æ“ä½œã€‚</li></ol></li><li>stop-writes-on-bgsave-error yes # å¦‚æœæŒä¹…åŒ–å‡ºé”™ï¼Œæ˜¯å¦è¿˜è¦ç»§ç»­å·¥ä½œã€‚</li><li>rdbcompression yes # æ˜¯å¦å‹ç¼©rdbæ–‡ä»¶ï¼Œéœ€è¦æ¶ˆè€—ä¸€äº›cpuèµ„æºã€‚</li><li>rdbchecksum yes # ä¿å­˜rdbæ–‡ä»¶çš„æ—¶å€™ï¼Œè¿›è¡Œé”™è¯¯çš„æ£€æŸ¥æ ¡éªŒã€‚</li><li>dir ./ # rdbæ–‡ä»¶ä¿å­˜çš„ç›®å½•ã€‚</li></ol><p>security</p><ol><li>requirepass 123456 <ol><li>è®¾ç½®å¯†ç ï¼Œå®¢æˆ·ç«¯è¿æ¥æ—¶ä½¿ç”¨auth 123456</li></ol></li></ol><p>client</p><ol><li>maxclients 10000 #è®¾ç½®èƒ½è¿æ¥ä¸Šredisçš„æœ€å¤§å®¢æˆ·ç«¯æ•°é‡</li><li>maxmemory &lt;bytes&gt; # redisè®¾ç½®æœ€å¤§çš„å†…å­˜æ•°é‡ã€‚</li><li>maxmemory-policy noeviction # å†…å­˜è¾¾åˆ°ä¸Šé™ä¹‹åçš„å¤„ç†ç­–ç•¥ <ol><li>noevictionï¼šå½“å†…å­˜è¾¾åˆ°é˜ˆå€¼çš„æ—¶å€™ï¼Œæ‰€æœ‰å¼•èµ·ç”³è¯·å†…å­˜çš„å‘½ä»¤ä¼šæŠ¥é”™ã€‚</li><li>allkeys-lruï¼šåœ¨æ‰€æœ‰é”®ä¸­é‡‡ç”¨lruç®—æ³•åˆ é™¤é”®ï¼Œç›´åˆ°è…¾å‡ºè¶³å¤Ÿå†…å­˜ä¸ºæ­¢ã€‚</li><li><strong>volatile-lru</strong>ï¼šåœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ä¸­é‡‡ç”¨lruç®—æ³•åˆ é™¤é”®ï¼Œç›´åˆ°è…¾å‡ºè¶³å¤Ÿå†…å­˜ä¸ºæ­¢ã€‚</li><li>allkeys-randomï¼šåœ¨æ‰€æœ‰é”®ä¸­é‡‡ç”¨éšæœºåˆ é™¤é”®ï¼Œç›´åˆ°è…¾å‡ºè¶³å¤Ÿå†…å­˜ä¸ºæ­¢ã€‚</li><li>volatile-randomï¼šåœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ä¸­éšæœºåˆ é™¤é”®ï¼Œç›´åˆ°è…¾å‡ºè¶³å¤Ÿå†…å­˜ä¸ºæ­¢ã€‚</li><li>volatile-ttlï¼šåœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ç©ºé—´ä¸­ï¼Œå…·æœ‰æ›´æ—©è¿‡æœŸæ—¶é—´çš„keyä¼˜å…ˆç§»é™¤ã€‚</li></ol></li></ol><p>AOFæ¨¡å¼</p><ol><li>appendonly no # é»˜è®¤ä¸å¼€å¯AOFæ¨¡å¼ï¼Œé»˜è®¤ä½¿ç”¨RDBæ–¹å¼æŒä¹…åŒ–ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹RDBå®Œå…¨å¤Ÿç”¨ã€‚</li><li>appendfilename &quot;appendonly.aof&quot; # æŒä¹…åŒ–çš„æ–‡ä»¶çš„åå­—ã€‚</li><li>appendfsync always # æ¯æ¬¡ä¿®æ”¹éƒ½ä¼šsyncæ¶ˆè€—æ€§èƒ½ã€‚</li><li>appendfsync everysec # æ¯ç§’æ‰§è¡Œä¸€æ¬¡</li><li>appendfsync no # ä¸æ‰§è¡Œsyncï¼Œæ“ä½œç³»ç»Ÿè‡ªå·±åŒæ­¥æ•°æ®ï¼Œé€Ÿåº¦æœ€å¿«ã€‚</li></ol><h2 id="æŒä¹…åŒ–-1" tabindex="-1"><a class="header-anchor" href="#æŒä¹…åŒ–-1" aria-hidden="true">#</a> æŒä¹…åŒ–</h2><h3 id="rdb" tabindex="-1"><a class="header-anchor" href="#rdb" aria-hidden="true">#</a> RDB</h3><ol><li>redis database</li><li>è¿‡ç¨‹</li></ol><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/22839467/1672318068576-935fcd03-d133-43ec-a1b9-aff2a28b1908.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ol start="3"><li>æ‰‹åŠ¨è§¦å‘ <ol><li>saveï¼šé˜»å¡</li><li>bgsaveï¼šéé˜»å¡ï¼ˆä¸€èˆ¬ç”¨è¿™ä¸ªï¼‰</li></ol></li><li>å®¢æˆ·ç«¯æ¸…é™¤æ•°æ® <ol><li>åˆ é™¤dump.rdb</li><li>å®¢æˆ·ç«¯æ¸…é™¤æ‰€æœ‰æ•°æ®flushall</li><li>é‡æ–°å¯åŠ¨åæ•°æ®æ‰ä¼šæ¢å¤ã€‚</li><li>å†æ¬¡æ£€éªŒdump.rdbåˆå‡ºç°äº†ã€‚</li></ol></li><li>ä¼˜ç‚¹ <ol><li>é€‚åˆå¤§è§„æ¨¡æ•°æ®æ¢å¤ã€‚</li><li>å¯¹æ•°æ®å®Œæ•´æ€§è¦æ±‚ä¸é«˜ã€‚</li></ol></li><li>ç¼ºç‚¹ <ol><li>éœ€è¦ä¸€å®šçš„æ—¶é—´é—´éš”è¿›è¡Œæ“ä½œï¼Œå¦‚æœrediså®•æœºï¼Œæœ€åä¸€æ¬¡ä¿®æ”¹çš„æ•°æ®å°±æ²¡æœ‰äº†ã€‚</li><li>forkè¿›ç¨‹çš„æ—¶å€™ï¼Œä¼šå ç”¨ä¸€å®šçš„ç©ºé—´ã€‚</li></ol></li></ol><h3 id="aof" tabindex="-1"><a class="header-anchor" href="#aof" aria-hidden="true">#</a> AOF</h3><ol><li>append only file</li><li>è®°å½•set key valueè¿™æ ·çš„å‘½ä»¤ã€‚</li><li>rediså¯åŠ¨ä¹‹åˆä¼šè¯»å–æ–‡ä»¶(æ‰§è¡Œå‘½ä»¤)é‡æ–°æ„å»ºæ•°æ®ã€‚</li><li>ç±»ä¼¼binlog</li><li>ä¿å­˜ä¸ºxxx.aofï¼Œå¦‚appendonly.aofæ–‡ä»¶ã€‚</li><li>ä¿®å¤aofæ–‡ä»¶ <ol><li>redis-check-aof --fix appendonly.aof</li><li>é‡å¯æœåŠ¡ã€‚</li></ol></li><li>ä¼˜ç‚¹ <ol><li>æ¯æ¬¡ä¿®æ”¹éƒ½åŒæ­¥ï¼Œæ–‡ä»¶å®Œæ•´æ€§å¥½ã€‚</li><li>æ¯ç§’åŒæ­¥ä¸€æ¬¡ï¼Œå¯èƒ½ä¼šä¸¢å¤±ä¸€ç§’çš„æ•°æ®ã€‚</li><li>ä»ä¸åŒæ­¥ï¼Œæ•ˆç‡æœ€é«˜çš„ã€‚</li></ol></li><li>ç¼ºç‚¹ <ol><li>AOFè¿œè¿œå¤§äºRDBï¼Œä¿®å¤çš„é€Ÿåº¦æ¯”RDBæ…¢ã€‚</li><li>AOFè¿è¡Œæ•ˆç‡æ¯”RDBæ…¢ï¼Œæ‰€ä»¥redisé»˜è®¤æ˜¯rdbé…ç½®ã€‚</li></ol></li><li>é—®é¢˜ <ol><li>aofæœ‰é‡å†™åŠŸèƒ½ï¼Œåªä¼šä¿ç•™æœ€åä¸€æ¡ä¿®æ”¹çš„å‘½ä»¤ã€‚</li></ol></li></ol><p>æ€§èƒ½å»ºè®®</p><ol><li>rdbåšåå¤‡ç”¨é€”ï¼Œå»ºè®®åªåœ¨slaveä¸ŠæŒä¹…åŒ–rdbï¼Œè€Œä¸”15åˆ†é’Ÿå¤‡ä»½ä¸€æ¬¡å°±å¤Ÿäº†ã€‚ <ol><li>save 900 1</li></ol></li><li>AOFä»£ä»·å¸¦æ¥æŒç»­çš„IOã€‚ç£ç›˜ä¼šå¯¼è‡´cpuå ç”¨åˆ°è¿™äº†ï¼Œæ²¡æ³•åšåˆ«çš„ã€‚</li><li>åŒæ—¶å¼€å¯ä¸¤ç§æŒä¹…åŒ–æ–¹å¼ã€‚</li></ol><h1 id="å‘å¸ƒè®¢é˜…" tabindex="-1"><a class="header-anchor" href="#å‘å¸ƒè®¢é˜…" aria-hidden="true">#</a> å‘å¸ƒè®¢é˜…</h1><ol><li>pub/subï¼šå‘é€è€…å‘é€æ¶ˆæ¯ï¼Œè®¢é˜…è€…æ¥æ”¶æ¶ˆæ¯ã€‚</li><li>rediså®¢æˆ·ç«¯å¯ä»¥è®¢é˜…ä»»æ„æ•°é‡çš„é¢‘é“ã€‚</li></ol><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/22839467/1672323013826-47623a52-4233-454d-a782-e4e1e5f08445.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ol start="3"><li>åœºæ™¯ <ol><li>å®æ—¶æ¶ˆæ¯ç³»ç»Ÿ</li><li>å®æ—¶èŠå¤©</li><li>è®¢é˜…ã€å…³æ³¨ç³»ç»Ÿ</li><li>ç¨å¾®å¤æ‚çš„åœºæ™¯æ›´å¤šçš„ä½¿ç”¨æ¶ˆæ¯ä¸­é—´ä»¶MQã€‚</li></ol></li><li>å‘½ä»¤</li></ol><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/22839467/1672323289320-71ab939b-b6a9-4ec2-9668-2f0f5da7af13.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ol start="5"><li>ä¸¾ä¾‹ <ol><li>è®¢é˜…è€…1 <ol><li>subscribe redisChat</li></ol></li><li>è®¢é˜…è€…2 <ol><li>subscribe redisChat</li></ol></li><li>å‘å¸ƒè€… <ol><li>publish redisChat &quot;hello redis pub sub&quot;</li></ol></li></ol></li></ol><h1 id="ä¸»ä»å¤åˆ¶" tabindex="-1"><a class="header-anchor" href="#ä¸»ä»å¤åˆ¶" aria-hidden="true">#</a> ä¸»ä»å¤åˆ¶</h1><p>æ¦‚å¿µ</p><ol><li>ä¸»èŠ‚ç‚¹master/leaderçš„æ•°æ®å¤åˆ¶åˆ°ä»èŠ‚ç‚¹slave/followerã€‚</li><li>æ•°æ®å¤åˆ¶æ˜¯å•å‘çš„ï¼Œåªèƒ½ä»ä¸»èŠ‚ç‚¹åˆ°ä»èŠ‚ç‚¹ã€‚</li><li>masterä»¥å†™ä¸ºä¸»ï¼Œslaveä»¥è¯»ä¸ºä¸»ã€‚</li></ol><p>ä½œç”¨</p><ol><li>æ•°æ®å†—ä½™ï¼šå®ç°äº†æ•°æ®çš„çƒ­å¤‡ä»½ï¼Œæ˜¯æŒä¹…åŒ–ä¹‹å¤–çš„ä¸€ç§æ•°æ®å†—ä½™æ–¹å¼ã€‚</li><li>æ•…éšœæ¢å¤ï¼šä¸»èŠ‚ç‚¹å‡ºç°é—®é¢˜ï¼Œç”±ä»èŠ‚ç‚¹æä¾›æœåŠ¡ï¼Œå®ç°æ•…éšœæ¢å¤ã€‚</li><li>è´Ÿè½½å‡è¡¡ï¼šä¸»ä»å¤åˆ¶çš„åŸºç¡€ä¸Šé…åˆè¯»å†™åˆ†ç¦»ï¼ˆä¸»èŠ‚ç‚¹æä¾›å†™æœåŠ¡ï¼Œä»èŠ‚ç‚¹æä¾›è¯»æœåŠ¡ï¼‰ï¼Œå†™æ•°æ®çš„æ—¶å€™è¿ä¸»èŠ‚ç‚¹ï¼Œè¯»çš„æ—¶å€™è¿ä»èŠ‚ç‚¹ã€‚</li><li>é«˜å¯ç”¨åŸºçŸ³ï¼šä¸»ä»å¤åˆ¶ã€å“¨å…µæ¨¡å¼ã€é›†ç¾¤ã€‚</li></ol><p>é…ç½®rz-&gt;lrzsz</p><ol><li>ä¸»æœº6381ï¼Œä»æœº6382å’Œ6383</li><li>ç›´æ¥ä½¿ç”¨å‘½ä»¤é…ç½®ï¼Œä½†æ˜¯é‡å¯å¤±æ•ˆã€‚ <ol><li>é…ç½®ä»</li><li>SLAVEOF 127.0.0.1 6381</li><li>info replication</li></ol></li><li>ä½¿ç”¨é…ç½®æ–‡ä»¶ã€‚ <ol><li>é…ç½®ä»</li><li>replicaof ip port</li></ol></li><li>port 6381</li></ol><h1 id="daemonize-no" tabindex="-1"><a class="header-anchor" href="#daemonize-no" aria-hidden="true">#</a> daemonize no</h1><h1 id="logfile-6381-log" tabindex="-1"><a class="header-anchor" href="#logfile-6381-log" aria-hidden="true">#</a> logfile &quot;6381.log&quot;</h1><p>dir /redis/data<br> dbfilename &quot;dump-6381.rdb&quot;<br> appendfilename &quot;appendonly-6381.aof&quot; 5. port 6382</p><h1 id="daemonize-no-1" tabindex="-1"><a class="header-anchor" href="#daemonize-no-1" aria-hidden="true">#</a> daemonize no</h1><h1 id="logfile-6382-log" tabindex="-1"><a class="header-anchor" href="#logfile-6382-log" aria-hidden="true">#</a> logfile &quot;6382.log&quot;</h1><p>dir /redis/data<br> dbfilename &quot;dump-6382.rdb&quot;<br> appendfilename &quot;appendonly-6382.aof&quot;<br> slaveof 127.0.0.1 6381 6. port 6383</p><h1 id="daemonize-no-2" tabindex="-1"><a class="header-anchor" href="#daemonize-no-2" aria-hidden="true">#</a> daemonize no</h1><h1 id="logfile-6383-log" tabindex="-1"><a class="header-anchor" href="#logfile-6383-log" aria-hidden="true">#</a> logfile &quot;6383.log&quot;</h1><p>dir /redis/data<br> dbfilename &quot;dump-6383.rdb&quot;<br> appendfilename &quot;appendonly-6383.aof&quot;<br> slaveof 127.0.0.1 6381 7. å¯åŠ¨3å° 1. redis-server redis-6381.conf 2. redis-server redis-6382.conf 3. redis-server redis-6383.conf 8. æµ‹è¯• 1. redis-cli -p 6381 1. set mszlu haha 2. redis-cli -p 6382 1. get mszlu -&gt; haha 3. è¯´æ˜æ•°æ®åŒæ­¥å®ç°äº†ã€‚ 9. ä»æœºåªèƒ½è¯»ï¼Œä¸èƒ½å†™ã€‚ 10. å¤åˆ¶åŸç† 1. slaveå¯åŠ¨æˆåŠŸè¿æ¥åˆ°masteråä¼šå‘é€ä¸€ä¸ªsyncåŒæ­¥å‘½ä»¤ã€‚ 2. masteræ¥æ”¶åˆ°å‘½ä»¤åæ‰§è¡Œbgsaveï¼Œå°†rdbæ•°æ®æ–‡ä»¶ä¼ é€åˆ°slaveã€‚ 3. å…¨é‡å¤åˆ¶ï¼šslaveæ¥æ”¶åˆ°æ•°æ®åº“æ–‡ä»¶åï¼Œå°†å…¶å­˜ç›˜å¹¶åŠ è½½åˆ°å†…å­˜ã€‚ 4. å¢é‡å¤åˆ¶ï¼šmasterç»§ç»­å°†æ–°çš„ä¿®æ”¹å‘½ä»¤ä¼ ç»™slaveï¼Œå®ŒæˆåŒæ­¥ã€‚ 5. ä¸€æ—¦é‡æ–°è¿æ¥masterï¼Œä¸€æ¬¡å…¨é‡å¤åˆ¶å°†è¢«è‡ªåŠ¨æ‰§è¡Œã€‚</p><h1 id="å“¨å…µæ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#å“¨å…µæ¨¡å¼" aria-hidden="true">#</a> å“¨å…µæ¨¡å¼</h1><p>èƒŒæ™¯</p><ol><li>ä¸»æœåŠ¡å™¨å®•æœºåï¼Œéœ€è¦æ‰‹åŠ¨å°†ä¸€å°æœåŠ¡å™¨åˆ‡æ¢ä¸ºä¸»æœåŠ¡å™¨ã€‚ <ol><li>è´¹æ—¶è´¹åŠ›</li><li>é€ æˆä¸€æ®µæ—¶é—´æœåŠ¡ä¸å¯ç”¨ã€‚</li></ol></li></ol><p>æ¦‚è¿°</p><ol><li>redis2.8å¼€å§‹ã€‚</li><li>å“¨å…µæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹ã€‚</li></ol><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/22839467/1672471867276-904441de-c088-4d86-a7f9-39c50c6a0d81.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/22839467/1672471963259-b3f41836-bc40-4374-814b-2fe1c0a305cb.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>å“¨å…µï¼š</p><ol><li>åå°å“¨å…µç›‘æ§ä¸»æœåŠ¡å™¨æ˜¯å¦æ•…éšœã€‚ping/pong</li><li>å“¨å…µ1è®¤ä¸ºä¸»æœåŠ¡å™¨æŒ‚æ‰ï¼šä¸»è§‚ä¸‹çº¿</li><li>è¾¾åˆ°ä¸€å®šä¸ªæ•°çš„å“¨å…µéƒ½è®¤ä¸ºä¸‹çº¿ï¼šå®¢è§‚ä¸‹çº¿ã€‚</li><li>å¦‚æœæ•…éšœäº†æ ¹æ®æŠ•ç¥¨æ•°é€‰å“¨å…µèŠ‚ç‚¹ã€‚</li><li>é€‰å‡ºçš„å“¨å…µèŠ‚ç‚¹leaderè¿›è¡Œæ•…éšœè½¬ä¹‰/ä¸»ä»åˆ‡æ¢ã€‚</li><li>ä»slaveä¸­é€‰æ‹©ä¸€ä¸ªä½œä¸ºmaster <ol><li>é€Ÿåº¦å¿«ã€æ•°æ®æ–°çš„å¯èƒ½ä¼šä½œä¸ºæ–°çš„masterã€‚</li><li>æ•°æ®æ–° <ol><li>masterè¿™é‡Œæœ‰ä¸€ä¸ªå¢é‡åŒæ­¥çš„é˜Ÿåˆ—ï¼Œæœ‰ä¸€ä¸ªoffsetã€‚</li><li>å“ªä¸€ä¸ªslaveçš„offsetå¤§ï¼Œè¡¨ç¤ºæ•°æ®è¶Šæ–°ã€‚</li></ol></li></ol></li></ol><p>é…ç½®</p><ol><li>6401ä¸»ï¼Œ6402/6403ä» <ol><li>port 6401<br> dir &quot;/redis/data&quot;<br> dbfilename &quot;dump-6401.rdb&quot;</li><li>port 6402<br> dir &quot;/redis/data&quot;<br> dbfilename &quot;dump-6402.rdb&quot;<br> slaveof 127.0.0.1 6401</li><li>port 6403<br> dir &quot;/redis/data&quot;<br> dbfilename &quot;dump-6403.rdb&quot;<br> slaveof 127.0.0.1 6401</li></ol></li><li>å“¨å…µèŠ‚ç‚¹26401ã€26402/26403 <ol><li>port 26401<br> dir &quot;/redis/data&quot;<br> sentinel monitor mymaster 127.0.0.1 6401 2<br> sentinel down-after-milliseconds mymaster 5000<br> #sentinel failover-timeout mymaster 20000<br> #sentinel parallel-sync mymaster 1<br> #sentinel deny-scripts-reconfig yes</li><li>port 26402<br> dir &quot;/redis/data&quot;<br> sentinel monitor mymaster 127.0.0.1 6401 2 # æŠ•ç¥¨çš„æ•°é‡ï¼ŒæŠ•ä¸¤ç¥¨å°±æˆåŠŸ<br> sentinel down-after-milliseconds mymaster 5000<br> #sentinel failover-timeout mymaster 20000<br> #sentinel parallel-sync mymaster 1<br> #sentinel deny-scripts-reconfig yes</li><li>port 26403<br> dir &quot;/redis/data&quot;<br> sentinel monitor mymaster 127.0.0.1 6401 2<br> sentinel down-after-milliseconds mymaster 5000<br> #sentinel failover-timeout mymaster 20000<br> #sentinel parallel-sync mymaster 1<br> #sentinel deny-scripts-reconfig yes</li><li>config/sentinel/ <ol><li>æŠŠ6ä¸ªé…ç½®æ–‡ä»¶æ”¾è¿›æ¥</li></ol></li><li>å¯åŠ¨redisä¸»ä» <ol><li>redis-server /redis/config/sentinel/redis-6401.conf</li><li>redis-server /redis/config/sentinel/redis-6402.conf</li><li>redis-server /redis/config/sentinel/redis-6403.conf</li></ol></li><li>sentinel <ol><li>redis-sentinel /redis/config/sentinel/redis-sentinel-26401.conf</li><li>redis-sentinel /redis/config/sentinel/redis-sentinel-26402.conf</li><li>redis-sentinel /redis/config/sentinel/redis-sentinel-26403.conf</li></ol></li></ol></li><li>redis-cli -p 6401 <ol><li>infoæŸ¥çœ‹ä¸»ä»ä¿¡æ¯ã€‚</li></ol></li></ol><h1 id="é›†ç¾¤" tabindex="-1"><a class="header-anchor" href="#é›†ç¾¤" aria-hidden="true">#</a> é›†ç¾¤</h1><p>ç®€ä»‹ï¼š</p><ol><li>æ— ä¸­å¿ƒç»“æ„ã€‚</li><li>å¤šä¸ªèŠ‚ç‚¹ä¹‹é—´è‡ªåŠ¨è¿›è¡Œæ•°æ®åˆ†ç‰‡çš„èƒ½åŠ›ã€‚</li><li>æ”¯æŒèŠ‚ç‚¹åŠ¨æ€æ·»åŠ ä¸ç§»é™¤ã€‚</li><li>éƒ¨åˆ†èŠ‚ç‚¹ä¸å¯ç”¨æ—¶è¿›è¡Œè‡ªåŠ¨æ•…éšœè½¬ç§»ã€‚</li><li>é«˜æ€§èƒ½å¯æ‰©å±•ï¼Œæ”¯æŒæ‰©å±•åˆ°1000ä¸ªèŠ‚ç‚¹ã€‚</li></ol><h2 id="å“ˆå¸Œæ§½" tabindex="-1"><a class="header-anchor" href="#å“ˆå¸Œæ§½" aria-hidden="true">#</a> å“ˆå¸Œæ§½</h2><p>å®šä¹‰ï¼š</p><ol><li>redis-clusteræœ‰16384ï¼ˆ2çš„14æ¬¡æ–¹ï¼‰ä¸ªå“ˆå¸Œæ§½ï¼Œæ¯ä¸ªkeyé€šè¿‡CRC16æ ¡éªŒåå¯¹16384å–æ¨¡å†³å®šæ”¾åˆ°é‚£ä¸ªæ§½ã€‚</li><li>é›†ç¾¤æ¯ä¸ªä¸»èŠ‚ç‚¹è´Ÿè´£ä¸€éƒ¨åˆ†hashæ§½ã€‚ <ol><li>3ä¸ªèŠ‚ç‚¹ã€‚</li><li>èŠ‚ç‚¹AåŒ…å«0-5500å“ˆå¸Œæ§½ã€‚</li><li>èŠ‚ç‚¹BåŒ…å«5501-11000å“ˆå¸Œæ§½ã€‚</li><li>èŠ‚ç‚¹CåŒ…å«11001åˆ°16383å·å“ˆå¸Œæ§½ã€‚</li></ol></li></ol><p>å®¢æˆ·ç«¯å‘é›†ç¾¤è¯·æ±‚çš„å¤„ç†è¿‡ç¨‹ï¼š</p><ol><li>å®¢æˆ·ç«¯æ ¹æ®è¯·æ±‚çš„é”®è®¡ç®—å¾—åˆ°å“ˆå¸Œæ§½ã€‚ <ol><li>crc16(key)%16384</li></ol></li><li>å‡è®¾è¯·æ±‚çš„é”®å¯¹åº”çš„å“ˆå¸Œå€¼è½åœ¨äº†èŠ‚ç‚¹Aè´Ÿè´£çš„å“ˆå¸Œæ§½èŒƒå›´å†…ã€‚</li><li>å®¢æˆ·ç«¯å‘ä»»æ„èŠ‚ç‚¹å‘é€è¯·æ±‚ï¼Œè®©è¯¥èŠ‚ç‚¹å¸®åŠ©å®ƒæ‰¾åˆ°è´Ÿè´£è¯¥å“ˆå¸Œæ§½çš„èŠ‚ç‚¹ã€‚ <ol><li>å¦‚æœè¿™ä¸ªèŠ‚ç‚¹å°±æ˜¯è´Ÿè´£è¯¥å“ˆå¸Œæ§½çš„èŠ‚ç‚¹ï¼Œå³è‡ªèº«èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯æ‰¾åˆ°äº†ã€‚æ‰§è¡Œå‘½ä»¤ã€‚</li><li>å¦åˆ™è®©è¿™ä¸ªèŠ‚ç‚¹è´Ÿè´£å°†è¯·æ±‚è½¬å‘åˆ°è´Ÿè´£è¯¥å“ˆå¸Œæ§½çš„èŠ‚ç‚¹ã€‚</li><li>MOVEDã€‚å®¢æˆ·ç«¯é‡å®šå‘ã€‚</li></ol></li><li>å“ˆå¸Œæ§½çš„çŠ¶æ€å¯èƒ½æ˜¯MIGRATINGã€‚ <ol><li>è¿ç§»çŠ¶æ€ã€‚</li><li>å®¢æˆ·ç«¯çš„è¯·æ±‚æ— æ³•å¯¹è¿™ä¸ªå“ˆå¸Œæ§½çš„é”®è¿›è¡Œå†™æ“ä½œã€‚</li><li>ä½†å¯ä»¥è¯»ã€‚</li></ol></li></ol><h2 id="é›†ç¾¤æ­å»º" tabindex="-1"><a class="header-anchor" href="#é›†ç¾¤æ­å»º" aria-hidden="true">#</a> é›†ç¾¤æ­å»º</h2><p>æ–¹å¼ï¼š</p><ol><li>é…ç½®æœåŠ¡å™¨3ä¸»3ä»</li><li>å»ºç«‹é€šä¿¡</li><li>åˆ†æ§½</li><li>æ­å»ºä¸»ä»ã€‚</li></ol><p>Clusteré…ç½®</p><ol><li>æ˜¯å¦å¯ç”¨clusterï¼ŒåŠ å…¥clusterèŠ‚ç‚¹ <ol><li>cluster-enabled yes|no</li></ol></li><li>clusteré…ç½®æ–‡ä»¶åï¼Œè¯¥æ–‡ä»¶å±äºè‡ªåŠ¨ç”Ÿæˆï¼Œä»…ç”¨äºå¿«é€ŸæŸ¥æ‰¾æ–‡ä»¶å¹¶æŸ¥è¯¢æ–‡ä»¶å†…å®¹ã€‚ <ol><li>cluster-config-file filename</li></ol></li><li>èŠ‚ç‚¹æœåŠ¡å“åº”è¶…æ—¶æ—¶é—´ï¼Œç”¨äºåˆ¤å®šè¯¥èŠ‚ç‚¹æ˜¯å¦ä¸‹çº¿æˆ–åˆ‡æ¢ä¸ºä»èŠ‚ç‚¹ã€‚ <ol><li>cluster-node-timeout milliseconds</li></ol></li><li>masterè¿æ¥çš„slaveæœ€å°æ•°é‡ <ol><li>cluster-migration-barrier min_slave_number</li></ol></li><li>cluster-6501.conf <ol><li>port 6501<br> dir &quot;/redis/data&quot;<br> dbfilename &quot;dump-6501.rdb&quot;<br> cluster-enabled yes<br> cluster-config-file &quot;cluster-6501.conf&quot;<br> cluster-node-timeout 5000</li></ol></li></ol><p>èŠ‚ç‚¹æ“ä½œå‘½ä»¤ï¼š</p><ol><li>æŸ¥çœ‹é›†ç¾¤èŠ‚ç‚¹ä¿¡æ¯ <ol><li>cluster nodes</li></ol></li><li>æ›´æ”¹slaveæŒ‡å‘æ–°çš„master <ol><li>cluster replicate master-id</li></ol></li><li>å‘ç°ä¸€ä¸ªæ–°èŠ‚ç‚¹ï¼Œæ–°å¢master <ol><li>cluster meet ip:port</li></ol></li><li>å¿½ç•¥ä¸€ä¸ªæ²¡æœ‰soltçš„èŠ‚ç‚¹ <ol><li>cluster forget server_id</li></ol></li><li>æ‰‹åŠ¨æ•…éšœè½¬ç§» <ol><li>cluster failover</li></ol></li></ol><p>redis-cliå‘½ä»¤</p><ol><li>åˆ›å»ºé›†ç¾¤ <ol><li>redis-cli --cluster create masterhost1:masterport1 masterhost2:masterport2 masterhost3:masterport3 [masterhostn:masterportn ...] slavehost1:slaveport1 slavehost2:slaveport2 slavehost3:slaveport3 --cluster-replicas n <ol><li>masterä¸slaveçš„æ•°é‡è¦åŒ¹é…ï¼Œä¸€ä¸ªmasterå¯¹åº”nä¸ªslaveï¼Œç”±æœ€åçš„å‚æ•°nå†³å®šã€‚</li><li>masterä¸slaveçš„åŒ¹é…é¡ºåºä¸ºç¬¬ä¸€ä¸ªmasterä¸å‰nä¸ªslaveåˆ†ä¸ºä¸€ç»„ï¼Œå½¢æˆä¸»ä»ç»“æ„ã€‚</li></ol></li></ol></li><li>æ·»åŠ masteråˆ°å½“å‰é›†ç¾¤ä¸­ï¼Œè¿æ¥æ—¶å¯ä»¥æŒ‡å®šä»»æ„ç°æœ‰èŠ‚ç‚¹åœ°å€å’Œç«¯å£ã€‚ <ol><li>redis-cli --cluster add-node new-master-host:new-master-port now-host:now-port</li></ol></li></ol><p>åˆ›å»ºé›†ç¾¤è¿‡ç¨‹</p><ol><li>mkdir cluster/ <ol><li>cd cluster/</li></ol></li><li>ä¸Šä¼ 8ä¸ªé…ç½®æ–‡ä»¶cluster-6501.confã€‚</li><li>å¯åŠ¨ä¸‰ä¸»ä¸‰ä» <ol><li>redis-server cluster/cluster-6501.conf</li><li>redis-server cluster/cluster-6502.conf</li><li>redis-server cluster/cluster-6503.conf</li><li>redis-server cluster/cluster-6504.conf</li><li>redis-server cluster/cluster-6505.conf</li><li>redis-server cluster/cluster-6506.conf</li></ol></li><li>ä¸€ä¸ªå®¢æˆ·ç«¯ <ol><li>åˆ›å»ºé›†ç¾¤ <ol><li>redis-cli --cluster create masterhost1:masterport1 masterhost2:masterport2 masterhost3:masterport3 slavehost1:slaveport1 slavehost2:slaveport2 slavehost3:slaveport3 --cluster-replicas n</li><li>redis-cli --cluster create 127.0.0.1:6501 127.0.0.1:6502 127.0.0.1:6503 127.0.0.1:6504 127.0.0.1:6505 127.0.0.1:6506 --cluster-replicas 1</li><li>--cluster-replicasï¼šä¸€ä¸ªmasterå¯¹åº”nä¸ªslaveã€‚</li></ol></li><li>æ·»åŠ masteråˆ°å½“å‰é›†ç¾¤ä¸­ï¼Œè¿æ¥æ—¶å¯ä»¥æŒ‡å®šä»»æ„ç°æœ‰èŠ‚ç‚¹åœ°å€å’Œç«¯å£ã€‚ <ol><li>redis-cli --cluster add-node new-master-host:new-master-port now-host:now-port</li><li>redis-server cluster/cluster-6507.conf <ol><li>å¯åŠ¨ä¸€ä¸ª6507</li></ol></li><li>redis-cli --cluster add-node 127.0.0.1:6507 127.0.0.1:6501</li></ol></li><li>æ·»åŠ slave <ol><li>redis-cli --cluster add-node new-slave-host:new-slave-port master-host:master-port --cluster-slave --cluster-master-id masterid</li></ol></li><li>åˆ é™¤èŠ‚ç‚¹ï¼Œå¦‚æœèŠ‚ç‚¹æ˜¯masterï¼Œå¿…é¡»ä¿éšœå…¶ä¸­æ²¡æœ‰æ§½ <ol><li>redis-cli --cluster del-node del-slave-host:del-slave-port del-slave-id</li></ol></li><li>é‡æ–°åˆ†æ§½ï¼Œåˆ†æ§½æ˜¯ä»å…·æœ‰æ§½çš„masterä¸­åˆ’åˆ†ä¸€éƒ¨åˆ†ç»™å…¶ä»–masterï¼Œè¿‡ç¨‹ä¸­ä¸åˆ›å»ºæ–°çš„æ§½ã€‚ <ol><li>redis-cli --cluster reshard new-master-host:new-master:port --cluster-from srcmaster-id1, src-master-id2, src-master-idn --cluster-to target-master-id --cluster-slots slots</li><li>redis-cli --cluster reshard 127.0.0.1:6507 --cluster-from id1,id2,id3 --cluster-to target-master-id(cluster nodeæŸ¥çœ‹çš„) --cluster-slots 1000 # è½¬ç§»1000ä¸ªæ§½</li></ol></li><li>é‡æ–°åˆ†é…æ§½ï¼Œä¸­å…·æœ‰æ§½çš„masterä¸­åˆ†é…æŒ‡å®šæ•°é‡çš„æ§½åˆ°å¦ä¸€ä¸ªmasterä¸­ï¼Œå¸¸ç”¨äºæ¸…ç©ºæŒ‡å®šmasterä¸­çš„æ§½ã€‚ <ol><li>redis-cli --cluster reshard src-master-host:src-master-port --cluster-from srcmaster-id --cluster-to target-master-id --cluster-slots --cluster-yes</li></ol></li></ol></li></ol><p>æµ‹è¯•é›†ç¾¤</p><ol><li>å®¢æˆ·ç«¯ <ol><li>redis-cli -p 6501 -c</li></ol></li><li>set mszlu haha <ol><li>-&gt; Redirected to slot [7859] located at 127.0.0.1:6502</li><li>é‡å®šå‘åˆ°å¦ä¸€ä¸ªä¸»èŠ‚ç‚¹ã€‚</li></ol></li></ol><p>æµ‹è¯•æ·»åŠ æ–°èŠ‚ç‚¹master</p><ol><li>å®¢æˆ·ç«¯ <ol><li>redis-cli -p 6501 -c</li></ol></li><li>æŸ¥çœ‹é›†ç¾¤èŠ‚ç‚¹ <ol><li>cluster nodes</li></ol></li><li>åˆ†æ§½</li></ol><figure><img src="https://cdn.nlark.com/yuque/0/2023/png/22839467/1672576549582-67c81a8c-a816-4358-9dda-08584c9833d7.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="https://cdn.nlark.com/yuque/0/2023/png/22839467/1672576701844-8666de64-1747-4517-a3db-9e371b31bebe.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/fuzhengwei/xfg-resume-blog/edit/main/src/tech/database/redis2.md" rel="noopener noreferrer" target="_blank" aria-label="åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><!----><!----></div></footer><nav class="vp-page-nav"><a aria-label="Redis(ä¸Š)" class="vp-link nav-link prev nav-link prev" href="/tech/database/redis1.html"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>Redis(ä¸Š)</div></a><!----></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer">txy</div><!----></footer></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app-9393c1ef.js" defer></script>
  </body>
</html>
