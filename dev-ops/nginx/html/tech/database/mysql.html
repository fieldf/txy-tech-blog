<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.67" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://vuepress-theme-hope-docs-demo.netlify.app/tech/database/mysql.html"><meta property="og:site_name" content="txy"><meta property="og:title" content="MYSQL"><meta property="og:description" content="基础 myisam和innodb myisam： myisam不支持行锁，读取数据只能加表锁。写入时加排他锁。 不支持事务。 不支持外键。 适合select密集型表。"><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="article:tag" content="索引"><meta property="article:tag" content="事务"><meta property="article:tag" content="mysql日志"><meta property="article:tag" content="mysql锁"><meta property="article:published_time" content="2023-02-12T00:00:00.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"MYSQL","image":[""],"datePublished":"2023-02-12T00:00:00.000Z","dateModified":null,"author":[]}</script><title>MYSQL | txy</title><meta name="description" content="基础 myisam和innodb myisam： myisam不支持行锁，读取数据只能加表锁。写入时加排他锁。 不支持事务。 不支持外键。 适合select密集型表。">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-c9869e9f.css" as="style"><link rel="stylesheet" href="/assets/style-c9869e9f.css">
    <link rel="modulepreload" href="/assets/app-9393c1ef.js"><link rel="modulepreload" href="/assets/mysql.html-962ff542.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-c27b6911.js"><link rel="modulepreload" href="/assets/mysql.html-e8d916d6.js"><link rel="prefetch" href="/assets/index.html-735676f8.js" as="script"><link rel="prefetch" href="/assets/slides.html-4fecdfc5.js" as="script"><link rel="prefetch" href="/assets/index.html-7b53c495.js" as="script"><link rel="prefetch" href="/assets/newyear.html-944e487d.js" as="script"><link rel="prefetch" href="/assets/index.html-2e696d81.js" as="script"><link rel="prefetch" href="/assets/index.html-e6bb8217.js" as="script"><link rel="prefetch" href="/assets/index.html-83dc8332.js" as="script"><link rel="prefetch" href="/assets/day01.html-71cb9b95.js" as="script"><link rel="prefetch" href="/assets/day02.html-eded512f.js" as="script"><link rel="prefetch" href="/assets/day03.html-84f6dff3.js" as="script"><link rel="prefetch" href="/assets/day04.html-9a6869e1.js" as="script"><link rel="prefetch" href="/assets/day05.html-0e6c5a2c.js" as="script"><link rel="prefetch" href="/assets/day06.html-31c368d4.js" as="script"><link rel="prefetch" href="/assets/day07~day08.html-b7e430b5.js" as="script"><link rel="prefetch" href="/assets/day09~day10.html-2779454b.js" as="script"><link rel="prefetch" href="/assets/day11.html-822f418f.js" as="script"><link rel="prefetch" href="/assets/day12.html-7cf65a1c.js" as="script"><link rel="prefetch" href="/assets/index.html-c018a6c5.js" as="script"><link rel="prefetch" href="/assets/index.html-0c4fe786.js" as="script"><link rel="prefetch" href="/assets/day01.html-25640708.js" as="script"><link rel="prefetch" href="/assets/network.html-c0c0f609.js" as="script"><link rel="prefetch" href="/assets/os.html-06f53d64.js" as="script"><link rel="prefetch" href="/assets/index.html-c2a712aa.js" as="script"><link rel="prefetch" href="/assets/index.html-60367c18.js" as="script"><link rel="prefetch" href="/assets/javaBasic.html-fba82a8a.js" as="script"><link rel="prefetch" href="/assets/juc.html-fab3c0be.js" as="script"><link rel="prefetch" href="/assets/jvm.html-8c759bd6.js" as="script"><link rel="prefetch" href="/assets/test.html-cefe98dc.js" as="script"><link rel="prefetch" href="/assets/index.html-4d3ddefb.js" as="script"><link rel="prefetch" href="/assets/redis1.html-d3f4f55c.js" as="script"><link rel="prefetch" href="/assets/redis2.html-9556671e.js" as="script"><link rel="prefetch" href="/assets/index.html-a3b45a06.js" as="script"><link rel="prefetch" href="/assets/404.html-b4776d74.js" as="script"><link rel="prefetch" href="/assets/index.html-fc2f755f.js" as="script"><link rel="prefetch" href="/assets/index.html-74e26e5f.js" as="script"><link rel="prefetch" href="/assets/index.html-3ab584ef.js" as="script"><link rel="prefetch" href="/assets/index.html-85a9d1a5.js" as="script"><link rel="prefetch" href="/assets/index.html-6e464e0f.js" as="script"><link rel="prefetch" href="/assets/index.html-790dcb3a.js" as="script"><link rel="prefetch" href="/assets/index.html-d9317e05.js" as="script"><link rel="prefetch" href="/assets/index.html-f632a12d.js" as="script"><link rel="prefetch" href="/assets/index.html-58b086d3.js" as="script"><link rel="prefetch" href="/assets/index.html-29d51dba.js" as="script"><link rel="prefetch" href="/assets/index.html-3fce8ebd.js" as="script"><link rel="prefetch" href="/assets/index.html-4fa67ef4.js" as="script"><link rel="prefetch" href="/assets/index.html-a345065e.js" as="script"><link rel="prefetch" href="/assets/index.html-99676ec6.js" as="script"><link rel="prefetch" href="/assets/index.html-962f5db5.js" as="script"><link rel="prefetch" href="/assets/index.html-f032921f.js" as="script"><link rel="prefetch" href="/assets/index.html-59885d4a.js" as="script"><link rel="prefetch" href="/assets/index.html-db45e329.js" as="script"><link rel="prefetch" href="/assets/index.html-bd7cd013.js" as="script"><link rel="prefetch" href="/assets/index.html-e5107a9e.js" as="script"><link rel="prefetch" href="/assets/index.html-833a67e5.js" as="script"><link rel="prefetch" href="/assets/index.html-3ca41c9b.js" as="script"><link rel="prefetch" href="/assets/index.html-55f4ecb4.js" as="script"><link rel="prefetch" href="/assets/index.html-51ea9059.js" as="script"><link rel="prefetch" href="/assets/index.html-b861f507.js" as="script"><link rel="prefetch" href="/assets/index.html-9cf4f270.js" as="script"><link rel="prefetch" href="/assets/index.html-345340b0.js" as="script"><link rel="prefetch" href="/assets/index.html-554d1e33.js" as="script"><link rel="prefetch" href="/assets/index.html-60dd4134.js" as="script"><link rel="prefetch" href="/assets/index.html-25073f64.js" as="script"><link rel="prefetch" href="/assets/index.html-5c157547.js" as="script"><link rel="prefetch" href="/assets/index.html-bf1c749e.js" as="script"><link rel="prefetch" href="/assets/index.html-4de94123.js" as="script"><link rel="prefetch" href="/assets/index.html-ed3627f5.js" as="script"><link rel="prefetch" href="/assets/index.html-9b6d9a9f.js" as="script"><link rel="prefetch" href="/assets/index.html-20d8fb9b.js" as="script"><link rel="prefetch" href="/assets/index.html-a40f67a3.js" as="script"><link rel="prefetch" href="/assets/index.html-90976564.js" as="script"><link rel="prefetch" href="/assets/index.html-9a23dc1f.js" as="script"><link rel="prefetch" href="/assets/index.html-64e27dec.js" as="script"><link rel="prefetch" href="/assets/index.html-5789d2a3.js" as="script"><link rel="prefetch" href="/assets/index.html-47621742.js" as="script"><link rel="prefetch" href="/assets/index.html-5da90325.js" as="script"><link rel="prefetch" href="/assets/index.html-5128b590.js" as="script"><link rel="prefetch" href="/assets/index.html-75ba5bac.js" as="script"><link rel="prefetch" href="/assets/index.html-1e835183.js" as="script"><link rel="prefetch" href="/assets/index.html-a12bc44e.js" as="script"><link rel="prefetch" href="/assets/index.html-2f0298d3.js" as="script"><link rel="prefetch" href="/assets/index.html-1c2d577e.js" as="script"><link rel="prefetch" href="/assets/index.html-a3cb0e86.js" as="script"><link rel="prefetch" href="/assets/index.html-9a206450.js" as="script"><link rel="prefetch" href="/assets/index.html-51455f85.js" as="script"><link rel="prefetch" href="/assets/index.html-e6e37831.js" as="script"><link rel="prefetch" href="/assets/index.html-d9ccb502.js" as="script"><link rel="prefetch" href="/assets/index.html-6fd80673.js" as="script"><link rel="prefetch" href="/assets/index.html-f6bec4c8.js" as="script"><link rel="prefetch" href="/assets/slides.html-d64e1948.js" as="script"><link rel="prefetch" href="/assets/index.html-2ff2d4a8.js" as="script"><link rel="prefetch" href="/assets/newyear.html-358bd763.js" as="script"><link rel="prefetch" href="/assets/index.html-9ff6d28f.js" as="script"><link rel="prefetch" href="/assets/index.html-3f0c3990.js" as="script"><link rel="prefetch" href="/assets/index.html-f4fe70f8.js" as="script"><link rel="prefetch" href="/assets/day01.html-24bf1dcb.js" as="script"><link rel="prefetch" href="/assets/day02.html-761f8f70.js" as="script"><link rel="prefetch" href="/assets/day03.html-f07c33ca.js" as="script"><link rel="prefetch" href="/assets/day04.html-f29aa75c.js" as="script"><link rel="prefetch" href="/assets/day05.html-5e3bfd56.js" as="script"><link rel="prefetch" href="/assets/day06.html-4ac2da5b.js" as="script"><link rel="prefetch" href="/assets/day07~day08.html-b96173fa.js" as="script"><link rel="prefetch" href="/assets/day09~day10.html-ed4707ba.js" as="script"><link rel="prefetch" href="/assets/day11.html-d2269449.js" as="script"><link rel="prefetch" href="/assets/day12.html-bf0719ba.js" as="script"><link rel="prefetch" href="/assets/index.html-90474b36.js" as="script"><link rel="prefetch" href="/assets/index.html-84c47241.js" as="script"><link rel="prefetch" href="/assets/day01.html-66f75da8.js" as="script"><link rel="prefetch" href="/assets/network.html-a3ef0226.js" as="script"><link rel="prefetch" href="/assets/os.html-baf67430.js" as="script"><link rel="prefetch" href="/assets/index.html-5c6ee5b4.js" as="script"><link rel="prefetch" href="/assets/index.html-9b3976b5.js" as="script"><link rel="prefetch" href="/assets/javaBasic.html-c92458b8.js" as="script"><link rel="prefetch" href="/assets/juc.html-a19bf759.js" as="script"><link rel="prefetch" href="/assets/jvm.html-8a971d25.js" as="script"><link rel="prefetch" href="/assets/test.html-38fc3b83.js" as="script"><link rel="prefetch" href="/assets/index.html-7aa01566.js" as="script"><link rel="prefetch" href="/assets/redis1.html-d8c015f2.js" as="script"><link rel="prefetch" href="/assets/redis2.html-ee0ebcf4.js" as="script"><link rel="prefetch" href="/assets/index.html-3bf59523.js" as="script"><link rel="prefetch" href="/assets/404.html-e337e304.js" as="script"><link rel="prefetch" href="/assets/index.html-a2da1451.js" as="script"><link rel="prefetch" href="/assets/index.html-e6971261.js" as="script"><link rel="prefetch" href="/assets/index.html-0e6dc14d.js" as="script"><link rel="prefetch" href="/assets/index.html-2e4ea1db.js" as="script"><link rel="prefetch" href="/assets/index.html-45f8610e.js" as="script"><link rel="prefetch" href="/assets/index.html-ee19690d.js" as="script"><link rel="prefetch" href="/assets/index.html-ad54cf8d.js" as="script"><link rel="prefetch" href="/assets/index.html-8821feaa.js" as="script"><link rel="prefetch" href="/assets/index.html-64ff2a93.js" as="script"><link rel="prefetch" href="/assets/index.html-bd63af97.js" as="script"><link rel="prefetch" href="/assets/index.html-16ec6f1b.js" as="script"><link rel="prefetch" href="/assets/index.html-47fe3ac3.js" as="script"><link rel="prefetch" href="/assets/index.html-31fb0ddc.js" as="script"><link rel="prefetch" href="/assets/index.html-df2ba920.js" as="script"><link rel="prefetch" href="/assets/index.html-1b3ada3a.js" as="script"><link rel="prefetch" href="/assets/index.html-052d18d0.js" as="script"><link rel="prefetch" href="/assets/index.html-71c6344c.js" as="script"><link rel="prefetch" href="/assets/index.html-c54d71ff.js" as="script"><link rel="prefetch" href="/assets/index.html-cb9c0602.js" as="script"><link rel="prefetch" href="/assets/index.html-65493fe2.js" as="script"><link rel="prefetch" href="/assets/index.html-88a0f851.js" as="script"><link rel="prefetch" href="/assets/index.html-28c40db3.js" as="script"><link rel="prefetch" href="/assets/index.html-96bb39ec.js" as="script"><link rel="prefetch" href="/assets/index.html-3df23958.js" as="script"><link rel="prefetch" href="/assets/index.html-e66072f3.js" as="script"><link rel="prefetch" href="/assets/index.html-f9758f63.js" as="script"><link rel="prefetch" href="/assets/index.html-079d3c62.js" as="script"><link rel="prefetch" href="/assets/index.html-d77eb133.js" as="script"><link rel="prefetch" href="/assets/index.html-e4df272f.js" as="script"><link rel="prefetch" href="/assets/index.html-f77bb6a0.js" as="script"><link rel="prefetch" href="/assets/index.html-5854e2ad.js" as="script"><link rel="prefetch" href="/assets/index.html-6bb1b1e8.js" as="script"><link rel="prefetch" href="/assets/index.html-ccaf3f7f.js" as="script"><link rel="prefetch" href="/assets/index.html-18cc193f.js" as="script"><link rel="prefetch" href="/assets/index.html-81845fe1.js" as="script"><link rel="prefetch" href="/assets/index.html-11d5681d.js" as="script"><link rel="prefetch" href="/assets/index.html-4c134a8c.js" as="script"><link rel="prefetch" href="/assets/index.html-6f6bc1d6.js" as="script"><link rel="prefetch" href="/assets/index.html-410fbe68.js" as="script"><link rel="prefetch" href="/assets/index.html-15053da9.js" as="script"><link rel="prefetch" href="/assets/index.html-80291257.js" as="script"><link rel="prefetch" href="/assets/index.html-460742e0.js" as="script"><link rel="prefetch" href="/assets/index.html-90539982.js" as="script"><link rel="prefetch" href="/assets/index.html-07b32080.js" as="script"><link rel="prefetch" href="/assets/index.html-5f53554d.js" as="script"><link rel="prefetch" href="/assets/index.html-2699675a.js" as="script"><link rel="prefetch" href="/assets/index.html-427d5770.js" as="script"><link rel="prefetch" href="/assets/index.html-3d8e081c.js" as="script"><link rel="prefetch" href="/assets/index.html-e3493f7a.js" as="script"><link rel="prefetch" href="/assets/index.html-a51afc00.js" as="script"><link rel="prefetch" href="/assets/index.html-c84bbc9b.js" as="script"><link rel="prefetch" href="/assets/index.html-b67d5c11.js" as="script"><link rel="prefetch" href="/assets/index.html-a0a60b2e.js" as="script"><link rel="prefetch" href="/assets/index.html-bb36c0a9.js" as="script"><link rel="prefetch" href="/assets/index.html-c1372031.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-3ee328cd.js" as="script"><link rel="prefetch" href="/assets/pageview-bb00f2ea.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="vp-link vp-brand vp-brand" href="/"><img class="vp-nav-logo" src="/logo.svg" alt="txy"><!----><span class="vp-site-name hide-in-pad">txy</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><a aria-label="主页" class="vp-link nav-link nav-link" href="/"><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span>主页<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="技术"><span class="title"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span>技术</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a aria-label="计算机基础" class="vp-link nav-link nav-link" href="/tech/basic.html"><!---->计算机基础<!----></a></li><li class="dropdown-item"><a aria-label="算法" class="vp-link nav-link nav-link" href="/tech/algorithms.html"><!---->算法<!----></a></li><li class="dropdown-item"><a aria-label="数据库" class="vp-link nav-link active nav-link active" href="/tech/database.html"><!---->数据库<!----></a></li><li class="dropdown-item"><a aria-label="Java" class="vp-link nav-link nav-link" href="/tech/java.html"><!---->Java<!----></a></li><li class="dropdown-item"><a aria-label="大数据" class="vp-link nav-link nav-link" href="/tech/bigdata.html"><!---->大数据<!----></a></li><li class="dropdown-item"><a aria-label="中间件" class="vp-link nav-link nav-link" href="/tech/middleware.html"><!---->中间件<!----></a></li><li class="dropdown-item"><a aria-label="云原生" class="vp-link nav-link nav-link" href="/tech/cloudnative.html"><!---->云原生<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a aria-label="随笔" class="vp-link nav-link nav-link" href="/essays.html"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span>随笔<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="学习笔记"><span class="title"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span>学习笔记</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a aria-label="xxx项目" class="vp-link nav-link nav-link" href="/notes/xxx.html"><!---->xxx项目<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a aria-label="兴趣爱好" class="vp-link nav-link nav-link" href="/hobbies.html"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span>兴趣爱好<!----></a></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><div class="nav-item vp-repo"><a class="vp-repo-link" href="https://github.com/fuzhengwei/xfg-resume-blog" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><!--[--><a aria-label="数据库" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/tech/database/"><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span>数据库<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="MYSQL" class="vp-link nav-link active vp-sidebar-link vp-sidebar-page active nav-link active vp-sidebar-link vp-sidebar-page active" href="/tech/database/mysql.html"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>MYSQL<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="myisam和innodb" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#myisam和innodb"><!---->myisam和innodb<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="参数" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#参数"><!---->参数<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="索引分类" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#索引分类"><!---->索引分类<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="按数据结构分" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#按数据结构分"><!---->按数据结构分<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="按字段特征分类" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#按字段特征分类"><!---->按字段特征分类<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="按物理存储分类" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#按物理存储分类"><!---->按物理存储分类<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="按字段个数来分" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#按字段个数来分"><!---->按字段个数来分<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="mysql的b+树和b树的区别" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#mysql的b-树和b树的区别"><!---->mysql的b+树和b树的区别<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="mysql数据库页" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#mysql数据库页"><!---->mysql数据库页<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="建立索引的原则" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#建立索引的原则"><!---->建立索引的原则<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="索引失效" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#索引失效"><!---->索引失效<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="设计数据库" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#设计数据库"><!---->设计数据库<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="字段设计" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#字段设计"><!---->字段设计<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="表的设计：范式" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#表的设计-范式"><!---->表的设计：范式<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="索引" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#索引"><!---->索引<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="缓存" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#缓存"><!---->缓存<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="慢查询日志" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#慢查询日志"><!---->慢查询日志<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="分区" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#分区"><!---->分区<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="分库分表" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#分库分表"><!---->分库分表<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="为什么要分库分表？" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#为什么要分库分表"><!---->为什么要分库分表？<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="分表" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#分表"><!---->分表<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="分库" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#分库"><!---->分库<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="集群" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#集群"><!---->集群<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="主从复制" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#主从复制"><!---->主从复制<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="读写分离" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#读写分离"><!---->读写分离<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="负载均衡" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#负载均衡"><!---->负载均衡<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="高可用" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#高可用"><!---->高可用<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="事务的四大特性" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#事务的四大特性"><!---->事务的四大特性<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="并发事务问题" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#并发事务问题"><!---->并发事务问题<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="脏读" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#脏读"><!---->脏读<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="不可重复读" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#不可重复读"><!---->不可重复读<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="幻读" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#幻读"><!---->幻读<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="隔离级别" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#隔离级别"><!---->隔离级别<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="读未提交" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#读未提交"><!---->读未提交<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="读已提交" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#读已提交"><!---->读已提交<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="可重复读" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#可重复读"><!---->可重复读<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="串行化" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#串行化"><!---->串行化<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="MVCC" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#mvcc"><!---->MVCC<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="redo log" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#redo-log"><!---->redo log<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="为什么binlog没有crash safe" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#为什么binlog没有crash-safe"><!---->为什么binlog没有crash safe<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="binlog" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#binlog"><!---->binlog<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="undo log" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#undo-log"><!---->undo log<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="分类/特点" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#分类-特点"><!---->分类/特点<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="死锁" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#死锁"><!---->死锁<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="乐观锁/悲观锁" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#乐观锁-悲观锁"><!---->乐观锁/悲观锁<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="两阶段锁" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tech/database/mysql.html#两阶段锁"><!---->两阶段锁<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a aria-label="Redis(上)" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/tech/database/redis1.html"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>Redis(上)<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="Redis(下)" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/tech/database/redis2.html"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>Redis(下)<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>MYSQL</h1><div class="page-info"><!----><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-02-12T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 31 分钟</span><meta property="timeRequired" content="PT31M"></span><span class="page-category-info" aria-label="分类🌈" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item category5 clickable" role="navigation">MYSQL</span><!--]--><meta property="articleSection" content="MYSQL"></span><span class="page-tag-info" aria-label="标签🏷" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item tag3 clickable" role="navigation">索引</span><span class="page-tag-item tag0 clickable" role="navigation">事务</span><span class="page-tag-item tag8 clickable" role="navigation">mysql日志</span><span class="page-tag-item tag3 clickable" role="navigation">mysql锁</span><!--]--><meta property="keywords" content="索引,事务,mysql日志,mysql锁"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">此页内容<button type="button" class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#myisam和innodb">myisam和innodb</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#参数">参数</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#索引分类">索引分类</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#按数据结构分">按数据结构分</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#按字段特征分类">按字段特征分类</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#按物理存储分类">按物理存储分类</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#按字段个数来分">按字段个数来分</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#mysql的b-树和b树的区别">mysql的b+树和b树的区别</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#mysql数据库页">mysql数据库页</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#建立索引的原则">建立索引的原则</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#索引失效">索引失效</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#设计数据库">设计数据库</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#字段设计">字段设计</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#表的设计-范式">表的设计：范式</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#索引">索引</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#缓存">缓存</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#慢查询日志">慢查询日志</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#分区">分区</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#分库分表">分库分表</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#为什么要分库分表">为什么要分库分表？</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#分表">分表</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#分库">分库</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#集群">集群</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#主从复制">主从复制</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#读写分离">读写分离</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#负载均衡">负载均衡</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#高可用">高可用</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#事务的四大特性">事务的四大特性</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#并发事务问题">并发事务问题</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#脏读">脏读</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#不可重复读">不可重复读</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#幻读">幻读</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#隔离级别">隔离级别</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#读未提交">读未提交</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#读已提交">读已提交</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#可重复读">可重复读</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#串行化">串行化</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#mvcc">MVCC</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#redo-log">redo log</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#为什么binlog没有crash-safe">为什么binlog没有crash safe</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#binlog">binlog</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#undo-log">undo log</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#分类-特点">分类/特点</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#死锁">死锁</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#乐观锁-悲观锁">乐观锁/悲观锁</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#两阶段锁">两阶段锁</a></li><!----><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><h1 id="基础" tabindex="-1"><a class="header-anchor" href="#基础" aria-hidden="true">#</a> 基础</h1><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/22839467/1667314175631-0ca0a803-49a4-4380-9fd9-96727c4aad59.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="myisam和innodb" tabindex="-1"><a class="header-anchor" href="#myisam和innodb" aria-hidden="true">#</a> myisam和innodb</h2><p>myisam：</p><ol><li>myisam不支持行锁，读取数据只能加表锁。写入时加排他锁。</li><li>不支持事务。</li><li>不支持外键。</li><li>适合select密集型表。</li></ol><p>innodb：</p><ol><li>支持行锁，采用mvcc支持高并发。</li><li>支持事务。</li><li>支持外键。</li><li>适合insert和updata密集型的表。</li></ol><h2 id="参数" tabindex="-1"><a class="header-anchor" href="#参数" aria-hidden="true">#</a> 参数</h2><ol><li>max_user_connection: 最大连接数。</li><li>wait_timeout: 数据库连接闲置时间。</li></ol><h1 id="·索引" tabindex="-1"><a class="header-anchor" href="#·索引" aria-hidden="true">#</a> ·索引</h1><p>索引相当于目录，能够通过索引快速获取相关的数据，空间换时间。索引和数据位于存储引擎层。</p><h2 id="索引分类" tabindex="-1"><a class="header-anchor" href="#索引分类" aria-hidden="true">#</a> 索引分类</h2><h3 id="按数据结构分" tabindex="-1"><a class="header-anchor" href="#按数据结构分" aria-hidden="true">#</a> 按数据结构分</h3><ol><li>b+树索引</li><li>hash索引(Innodb不支持hash索引，但是有一个自适应hash索引)，mysql没有显式的支持hash索引，作为内部的一种优化。怎么优化？就是二级索引被频繁访问，就会建立hash索引。某些热点数据会自动生成hash索引。</li></ol><h3 id="按字段特征分类" tabindex="-1"><a class="header-anchor" href="#按字段特征分类" aria-hidden="true">#</a> 按字段特征分类</h3><ol><li>主键索引、primary key</li><li>唯一索引、unique</li><li>普通索引、index</li><li>全文索引、fulltext</li><li>前缀索引、index(column_name(length))</li></ol><h4 id="前缀索引" tabindex="-1"><a class="header-anchor" href="#前缀索引" aria-hidden="true">#</a> 前缀索引</h4><p>index(column_name(length))</p><p>对字符类型的字段前几个字符建立索引，而不是在整个字段建立索引，例如char、varchar、binary、varbinary列。</p><p>作用是减少索引占用的存储空间，提升查询效率。</p><h3 id="按物理存储分类" tabindex="-1"><a class="header-anchor" href="#按物理存储分类" aria-hidden="true">#</a> 按物理存储分类</h3><ol><li>聚集索引（主键索引-&gt;unique索引-&gt;rowid）</li><li>二级索引（非聚集索引）[要回表]</li></ol><p>聚簇结构：索引的关键字和记录是存放在一起的。仅Innodb的主键索引为聚簇结构。其他的索引包括Innodb的非主键索引都是典型的BTree结构。</p><h4 id="回表和索引覆盖" tabindex="-1"><a class="header-anchor" href="#回表和索引覆盖" aria-hidden="true">#</a> 回表和索引覆盖</h4><p>二级索引叶子结点存放的是主键值。查询时，如果查询的数据能够在二级索引查询得到，就不需要回表，这个过程就是索引覆盖。如果查询的数据不在二级索引，会先检索二级索引，找到叶子结点获取主键值，再检索主键索引，就能查询到数据了，这个过程就是回表。</p><h3 id="按字段个数来分" tabindex="-1"><a class="header-anchor" href="#按字段个数来分" aria-hidden="true">#</a> 按字段个数来分</h3><ol><li>单列索引、联合索引</li></ol><h4 id="联合索引" tabindex="-1"><a class="header-anchor" href="#联合索引" aria-hidden="true">#</a> 联合索引</h4><p>alter table table_name add index index_name(prodect_no, name);</p><p>最左匹配原则：按照最左优先的方式进行索引匹配。如创建了(a,b,c)联合索引，如果查询条件是一下几种，可以匹配。</p><ul><li>where a=1;</li><li>where a=1 and b=2 and c=3;</li><li>where a=1 and b=2;</li></ul><p>先按a排序，a相同的情况下按b排序，b相同的情况再按c排序。所以b和c是全局无序，局部相对有序。所以在没有遵循最左匹配原则的情况下，是无法利用索引的，因为利用索引的前提是key是有序的。</p><h5 id="索引下推-using-index-condition" tabindex="-1"><a class="header-anchor" href="#索引下推-using-index-condition" aria-hidden="true">#</a> 索引下推（using index condition）</h5><p>select * from table where a&gt;1 and b=2</p><p>如果where a&gt;1 and b=2，a是可以用到联合索引的，b用不到，因为a&gt;1时，b值不是有序的，所以b用不上联合索引。除了a&gt;1，在&lt;,between,like等也会导致后面的列用不到索引。</p><p>那么在mysql5.6之前，对于满足a&gt;1条件的记录，需要一个一个的回表查看是否满足下面的条件b=2。</p><p>在mysql5.6引入了索引下推，也就是在联合索引遍历时，会对联合索引中的字段先做判断，直接过滤掉不满足条件的也就是b！=2的记录，从而减少回表次数。</p><p>因为后面的很可能索引失效，如果索引失效需要根据前面满足条件的，然后再去找后面满足条件的，如果前面的数据多，那么查找效率会低。所以一般把区分度高的索引列放到前面。区分度=distinct(col)/count(*)</p><h4 id="联合索引实例↑" tabindex="-1"><a class="header-anchor" href="#联合索引实例↑" aria-hidden="true">#</a> 联合索引实例↑</h4><p>select * from order where status=1 order by create_time asc</p><p>可以给status和create_time建立联合索引，这样当status满足条件时，create_time就是有序的了。</p><p>如果只给status建立索引，那么还需要对create_time排序，这时就要用到文件排序filesort，extra列。</p><h2 id="mysql的b-树和b树的区别" tabindex="-1"><a class="header-anchor" href="#mysql的b-树和b树的区别" aria-hidden="true">#</a> mysql的b+树和b树的区别</h2><p>B+树：B+树叶子结点存储数据，非叶子节点存储指针，非叶子节点数据冗余了一份在叶子结点。B+树叶子结点用<!---->进行连接。</p><p>B树：b树非叶子结点会存储数据。</p><ol><li>b+树通过索引能够定位到在哪个或者哪些叶子结点，b树查数据时节点内数据时存储在磁盘中的，每次和叶子结点内数据比对看是不是自己需要的数据时都需要进行一次磁盘io。</li><li>b+树非叶子节点存储的是指针，指针占据存储空间很小，也就是每一页可以存很多指针，b+树的树高就相对比较<!---->，不需要进行那么多次磁盘io。</li><li>而且<!----></li></ol><h2 id="mysql数据库页" tabindex="-1"><a class="header-anchor" href="#mysql数据库页" aria-hidden="true">#</a> mysql数据库页</h2><p>Mysql数据存储在磁盘，用页来存储，一页存多条数据的，这样避免了每查一行数据就进行一次磁盘io，是一下子能查出一页数据，减少磁盘io的次数。<!---->连接，每个页有一个<!---->，一页数据分成多个<!---->，通过页目录可以定位到对应的组。再在对应的组里找到想要查的数据。</p><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/22839467/1650684070725-98041b14-35ea-4364-ada2-daa1d80b2f2e.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>存多少数据？</p><p>1页16k，一个索引大概也就几B，算成10B。一页大概存1000多个索引。</p><p>数据比索引大一些，叶子结点1页存储数据大概有几百条。</p><p>如果3层，1000<em>1000</em>几百条，能存上亿条数据。</p><h2 id="建立索引的原则" tabindex="-1"><a class="header-anchor" href="#建立索引的原则" aria-hidden="true">#</a> 建立索引的原则</h2><p>建立：</p><ol><li>经常作为<!---->的where字段建立索引，可以提高查询速度。 <ol><li>where条件尽量避免对null值判断，可能会导致<!---->-&gt;全表扫描。</li><li>可以用0代表null。</li></ol></li><li>为经常需要order by，group by（）的字段建立索引。 <ol><li>这些字段需要排序操作，会浪费时间。建立索引，可以避免排序。</li></ol></li><li>选择<!---->性索引 <ol><li>因为值是唯一的有助于快速定位数据。给学号字段建立唯一索引，比给姓名建立索引强。</li></ol></li><li>字段值如果很稀少不适合做索引，比如性别。 <ol><li>count(distinct col)/count(*)，越接近1越好。如果值为0.1，代表找一条数据需要扫描10条。</li><li>比如性别没有很多个值没必要建索引。</li></ol></li></ol><p>联合：</p><ol><li>查询条件数据列较多，考虑建立联合索引。 <ol><li>查询时不使用select * from t.用具体的字段代替。</li></ol></li><li>最左前缀匹配原则 <ol><li>从左向右匹配直到遇到范围查询(&gt;,&lt;,between,like)时会停止匹配。</li><li>比如a=&quot;1&quot;and b=&quot;2&quot; and c&gt;&quot;3&quot; and d=4，建立(a,b,c,d)，d是用不到索引的。如果建立(a,b,d,c)的索引则都可以用到。abd顺序可调。优化器</li></ol></li></ol><p>前缀：</p><ol><li>选择字段长度小的做索引，如果长，查询速度受影响。 <ol><li>例如CHAR(100)检索的时间肯定比CHAR(10)时间更少。</li><li>或者长字段考虑建立前缀索引。</li></ol></li></ol><p>注意：</p><ol><li>索引不是越多越好 <ol><li>存储索引占用磁盘空间，索引越多磁盘空间越大。</li><li>修改表时，对索引的更新都很麻烦。索引越多，更新表越慢。</li><li>一个表的索引最好不要超过6个。</li></ol></li><li>索引不用就删了。</li><li>查询时用<!----><ol><li>select * from emp where deptno&gt;=4,而不用select * from emp where deptno&gt;3</li><li>大于等于直接跳到位置，大于先定位到数字再扫描第一个比它大的记录。</li></ol></li></ol><p>查询原则：</p><ol><li>sql尽可能简单。可以减少锁时间。</li><li>or改成in。or是O(n)，in是O(logn)。</li></ol><h2 id="索引失效" tabindex="-1"><a class="header-anchor" href="#索引失效" aria-hidden="true">#</a> 索引失效</h2><ol><li>尽量避免where条件判断null，或者使用<!---->，可能导致引擎使用全表扫描。</li><li>尽量避免在where子句中使用<!---->，否则导致引擎放弃使用索引而进行全表扫描。如：select id from t where num=10 or num=20可以select id from t where num=10 union all select id from t where num=20;</li><li><!---->可能会索引失效select id from t where name like &#39;%三&#39;模糊匹配</li><li>where条件字段使用<!---->。 <ol><li>表达式select id from t where num/2=100;</li><li>select id from t where substring(name,1,3)=&#39;abc&#39;, like &#39;abc%&#39;；</li><li>比如from_unixtime(create_time)=&#39;2014-05-29&#39;就不能使用到索引。 <ol><li>索引是存的是字段值。</li><li>如果用函数，检索时每个数据的字段值都得用函数才能比较。所以改成create_time=from_unixtime(&#39;2014-05-29&#39;);</li></ol></li></ol></li><li>用between不用in和not in要慎用，否则会导致全表扫描。select id from t where num in(1,2,3)，尤其对于连续的数值，能用between就不要用in了，select id from t where num between 1 and 3;</li></ol><h1 id="·性能优化" tabindex="-1"><a class="header-anchor" href="#·性能优化" aria-hidden="true">#</a> ·性能优化</h1><p>由于系统的吞吐量瓶颈往往出现在数据库的<!---->上；而且随着应用程序的运行，数据库中的数据会越来越多，处理时间会相应变慢；数据是存放在磁盘上的，读写速度无法和内存相比。因此需要进行性能优化。</p><h2 id="设计数据库" tabindex="-1"><a class="header-anchor" href="#设计数据库" aria-hidden="true">#</a> 设计数据库</h2><h3 id="字段设计" tabindex="-1"><a class="header-anchor" href="#字段设计" aria-hidden="true">#</a> <!----></h3><p>需要遵循：</p><ol><li>尽量用tinyint，smallint，medium_int做整形，而非int。如果非负用unsigned。</li><li>尽量用<!---->，比如varchar长度只分配需要的空间。因为非定长的空间会随着数据的增大而增大。</li><li>避免用null设置字段，占用额外的索引空间，而且很难进行查询优化。</li><li>尽量用timestamp而不是datetime。</li><li>某些情况下如果能用<!---->就用整形表示字符串。</li></ol><h3 id="表的设计-范式" tabindex="-1"><a class="header-anchor" href="#表的设计-范式" aria-hidden="true">#</a> <!---->：范式</h3><p>第一范式：字段<!---->不可分割。一个字段不能以逗号分割，存多个值。（关系型数据库，默认满足第一范式）。</p><p>第二范式：消除字段对主键的部分依赖。新增一个独立字段作为主键。第二范式是<!---->的，员工，部门，部门领导。指表描述一件事情。</p><p>第三范式：消除字段对主键的传递依赖。<!---->，员工，部门id， 部门名称，部门。。。数据冗余。能够避免冗余。</p><h3 id="索引" tabindex="-1"><a class="header-anchor" href="#索引" aria-hidden="true">#</a> <!----></h3><p>关键字<!---->称为索引。（包含关键字和对应的记录在磁盘中的地址）。关键字是从数据当中提取的用于标识、检索数据的特定内容。</p><p>索引检索为什么快？关键字相对于数据本身，数据量小。关键字是有序的，二分查找可快速确定位置。</p><p>在where、order by、join字段上建立索引。基于业务逻辑优化、组合索引：如果条件经常性出现在一起，那么可以考虑将多字段索引升级为复合索引。如果通过增加个别字段的索引，就可以出现索引覆盖，那么可以考虑为该字段建立索引。查询时，不常用到的索引，应该删除掉。</p><h2 id="缓存" tabindex="-1"><a class="header-anchor" href="#缓存" aria-hidden="true">#</a> <!----></h2><p>配置文件中开启缓存：Windows上使my.ini，linux上是my.cnf。mysqld段中配置<!---->: 0不开启，1开启默认缓存所有，需要在sql语句中增加select sql-no-cache提示来放弃缓存，<!---->，默认都不缓存，需要在sql语句中增加<!---->来主动缓存（常用）</p><p>将查询结果缓存：</p><p>select sql_cache * from user;</p><p>重置缓存</p><p>reset query cache;</p><!---->查询缓存，因为对一个表更新，这个表上所有的查询缓存都会被清空。静态表才适合使用查询缓存。Mysql8.0版本将查询缓存的整块功能彻底删掉了。<h2 id="慢查询日志" tabindex="-1"><a class="header-anchor" href="#慢查询日志" aria-hidden="true">#</a> <!----></h2><p>记录查询时间超过某阈值(long_query_time)的sql语句的日志。</p><p>配置：/etc/my.cnf，查看日志位置：<!----></p><p>开关: show variable like ‘slow_query_log’;</p><h2 id="分区" tabindex="-1"><a class="header-anchor" href="#分区" aria-hidden="true">#</a> <!----></h2><p>一般情况下我们创建的表对应一组存储文件，使用myisam存储引擎时是一个.myi和.myd文件。使用Innodb存储引擎时是一个.ibd和.frm（表结构）的文件。</p><p>当数据量较大（千万条记录级别以上），mysql性能下降，这时我们需要将数据分散到多组存储文件，保证单个文件的执行效率。</p><p>最常见分区方案：<!---->，将id的哈希值对10取模将数据均匀分散到<!---->中。Create table article (id int auto_increment primary key)partition by hash(id) partitions 10</p><!---->分区算法：<p>分区依据的字段必须是<!---->，分区是为了<!---->数据。</p><p>Hash(field): 相同的输入得到相同的输出。仅适用于整型字段。</p><p>Key(field):和上面的性质一样。只不过key是处理字符串的，比hash多了一步从字符串中计算出一个整形再做取模操作。</p><p>Range算法，条件分区算法，按照数据大小范围分区。将数据使用某种<!---->，分散到不同的分区中。比如文章的发布时间8月、9月、10月分区存放。</p><h2 id="分库分表" tabindex="-1"><a class="header-anchor" href="#分库分表" aria-hidden="true">#</a> <!----></h2><h3 id="为什么要分库分表" tabindex="-1"><a class="header-anchor" href="#为什么要分库分表" aria-hidden="true">#</a> 为什么要分库分表？</h3><ol><li>数据存储在磁盘中的。 <ol><li>我们的硬件存储数据比较有压力的。</li><li>表中数据量较大时，查询/对数据的操作效率会比较低。</li></ol></li><li>索引的操作，索引是存储在内存中的。 <ol><li>数据较多可能意味着索引较大，可能导致内存没办法存储这么多数据。</li></ol></li></ol><h3 id="分表" tabindex="-1"><a class="header-anchor" href="#分表" aria-hidden="true">#</a> 分表</h3><p>如果单表的数据量很大，就可以考虑分表，几千万？分表可以分为垂直分表和水平分表。</p><p>垂直分表：</p><ol><li>把一个表中的字段分到不同的表中。</li><li>根据业务需要，把一个表中不常使用的或者是长度比较长的分到一个表。</li><li>在数据库设计之初就应该考虑到，避免后续数据量很大时再做这种操作。</li></ol><p>水平分表：</p><ol><li>把一个表中的数据按照一些规则分到多个表中。</li><li>方式可以选择取模，比如按照某一个字段比如id，id对表的数量取模，得到余数代表存到对应的表中。 <ol><li>优点就是比较均匀，但是想要扩展会比较麻烦。</li><li>比如原先分成两个表，后来数据多了想要分成3个表，那数据的位置都会变。</li></ol></li><li>除了取模还可以按照时间来分，比如哪些时间段的分到哪张表，这种操作。 <ol><li>好处就是操作简单，缺点就是数据分布不会特别均匀。</li></ol></li></ol><h3 id="分库" tabindex="-1"><a class="header-anchor" href="#分库" aria-hidden="true">#</a> 分库</h3><ol><li>分库就是把数据库分成多个数据库。</li><li>可以按照业务来分库。 <ol><li>根据这些表的功能来分，分出不同的业务数据库。</li><li>比如订单数据库、评论数据库等等。</li></ol></li></ol><p>常用的组件：Mycat/ShardingSphere</p><p>执行流程：sql解析，查询优化，sql路由，sql改写，sql执行，结果归并</p><h2 id="集群" tabindex="-1"><a class="header-anchor" href="#集群" aria-hidden="true">#</a> <!----></h2><!----><p>横向扩展：从根本上提升数据库性能，由此而生的相关技术：读写分离、负载均衡。</p><h3 id="主从复制" tabindex="-1"><a class="header-anchor" href="#主从复制" aria-hidden="true">#</a> <!----></h3><ol><li>配置主从节点，master，slave。</li><li>从库读，主库写。</li></ol><p>主从同步：</p><ol><li>主服务器<!---->，它的修改ddl、dml会保存在<!---->。</li><li>主库的二进制日志传到从库中，然后<!---->对这些日志<!---->。</li><li>具体： <ol><li><!---->上启动一个<!---->。它向主服务器请求读取binlog日志，</li><li>然后把读取到的二进制日志写到本地的一个<!---->里面。</li><li>从服务器上面开启一个<!---->定时检查realy log，如果发现有更改立即把<!---->在本机上<!----></li></ol></li></ol><p>一主多从</p><ol><li>主库既要负责写又要负责为几个从库提供二进制日志。</li><li>可以把二进制日志只给某一从。</li><li>从库同时也可以作为其他从服务器的主库，把二进制日志发给其他从。</li><li>这样的架构性能会好很多，数据之间的延迟也会稍微好一些。</li></ol><p>好处</p><ol><li>实现<!---->，降低主库的访问压力（增删改主库，查询从库）</li><li>可以在<!---->，以避免备份期间影响主库业务。</li><li><!---->，可以快速<!---->提供服务</li></ol><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/22839467/1650705122557-4a061f6e-1994-4823-b74e-e332f0a0d7ee.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="读写分离" tabindex="-1"><a class="header-anchor" href="#读写分离" aria-hidden="true">#</a> <!----></h3><ol><li>基于主从复制</li><li>写：<!---->，读：<!---->。程序员控制，麻烦。</li><li>把数据库的读和写操作分开，以应对不同的数据库服务器。</li><li>主数据库提供写操作，从数据库提供读操作，这样能有效的减轻单台数据库的压力。</li></ol><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/22839467/1650706448534-8053e3df-677b-4727-b7a2-f7bcfb360d30.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>方案一：定义两种连接，就像我们在jdbc时定义的database一样，我们可以抽取出ReadDataBase，WriteDataBase implements DataBase，但是这种方式无法利用优秀的线程技术如DruidDataDource帮我们管理连接，也无法利用spring AOP让连接对DAO层透明。</p><p>方案二、使用Spring AOP。如果能够使用spring AOP解决数据源切换的问题，那么就可以和mybatis、druid整合到一起了。读数据源对应连接master而写数据源对应连接slave，那么就可以做到读写分离了。</p><h3 id="负载均衡" tabindex="-1"><a class="header-anchor" href="#负载均衡" aria-hidden="true">#</a> <!----></h3><p>负载均衡算法：</p><ol><li>轮询：按用户请求进入的时间顺序依次将请求分配给各个服务器。</li><li>加权轮询：按照处理能力来加权。</li><li>负载分配：依据服务器的空闲状态来分配用户请求。 <ol><li>每个节点的内存使用率，CPU利用率。</li><li>选出最闲的那个，效率太低。</li></ol></li></ol><h3 id="高可用" tabindex="-1"><a class="header-anchor" href="#高可用" aria-hidden="true">#</a> <!----></h3><p>在服务器架构时，为了保证服务器7*24不宕机在线状态，需要为每台单点服务器（由一台服务器提供的服务器，如写服务器、数据库中间件）提供冗余机。</p><p>对于写服务器来说，需要提供一台同样的写-冗余服务器，当写服务器健康时（写-冗余通过心跳检测），写-冗余作为一个从机的角色复制写服务器的内容与其做一个同步；当写服务器宕机时，写-冗余服务器便顶上来作为写服务器继续提供服务。对外界来说这个处理过程是透明的。即外界仅通过一个IP访问服务。</p><h1 id="·事务" tabindex="-1"><a class="header-anchor" href="#·事务" aria-hidden="true">#</a> ·事务</h1><h2 id="事务的四大特性" tabindex="-1"><a class="header-anchor" href="#事务的四大特性" aria-hidden="true">#</a> 事务的四大特性</h2><p>A原子性：事务是原子的，要么全部执行，要么全部不执行。原子性由undolog保证。也叫做回滚日志。用于记录数据被修改前的信息。可以提供回滚也可以用于MVCC。它不同于redolog，undolog是一种<!---->。可以认为当删除一条记录的时候，undolog记录一条新增记录，当更新一条记录的时候，它记录一条相反的更新操作。undolog在<!---->，事务<!---->，会用于MVCC。</p><p>C一致性：事务执行前后数据是一致的。是由原子性隔离性持久性一起保证的。</p><p>I隔离性：事务之间是相互隔离的。数据库有不同的隔离级别，会产生不同的并发问题。隔离性是锁和MVCC保证的。</p><p>D持久性：事务一旦<!---->，都会持久化到磁盘中。持久性是由redolog保证的，也叫重做日志，记录的是事务提交时数据页的物理修改，用来实现事务的持久性。该日志文件由两部分组成：重做日志<!---->（redolog buffer）在内存中。和重做日志<!---->（redolog file）在磁盘中，当事务提交之后会把所有修改信息都存在日志文件中，用于在<!---->发生错误时，<!---->使用。</p><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/22839467/1654697927568-bd0e0def-e486-4f7a-b937-b93d58682265.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="并发事务问题" tabindex="-1"><a class="header-anchor" href="#并发事务问题" aria-hidden="true">#</a> 并发事务问题</h2><h3 id="脏读" tabindex="-1"><a class="header-anchor" href="#脏读" aria-hidden="true">#</a> 脏读</h3><p>一个事务读取到另一个事务未提交的数据。</p><h3 id="不可重复读" tabindex="-1"><a class="header-anchor" href="#不可重复读" aria-hidden="true">#</a> 不可重复读</h3><p>一个事务2次读取到的数据不一致。</p><p>在一个事务提交前读一次，提交后读一次，读到的不一样。</p><h3 id="幻读" tabindex="-1"><a class="header-anchor" href="#幻读" aria-hidden="true">#</a> 幻读</h3><p>2次数据总数变了。一个事务查询数据得到n条，另一个事务可能增加或者删除了几条数据，这样当第一个事务再进行查询时得到的数据发生了变化。</p><p>innodb在可重复读隔离级别就能防止幻读，原因是next-key lock，对间隙也会加锁，所以并发插入的时候会被阻塞，防止幻读。</p><h2 id="隔离级别" tabindex="-1"><a class="header-anchor" href="#隔离级别" aria-hidden="true">#</a> 隔离级别</h2><h3 id="读未提交" tabindex="-1"><a class="header-anchor" href="#读未提交" aria-hidden="true">#</a> 读未提交</h3><ol><li>限制两个数据不能同时修改。</li><li>修改数据时，事务未提交，其他事务是可以读的。（脏读，不可重复读，幻读）</li><li>锁 <ol><li>读不加锁。写加排他锁，事务提交释放锁。</li><li>一个事务写操作还没提交事务，其他事务能够读取到未提交的数据。但是其他事务也去写，会阻塞。说明读未提交在写的时候会加锁，而且在事务提交的时候释放锁。</li></ol></li></ol><h3 id="读已提交" tabindex="-1"><a class="header-anchor" href="#读已提交" aria-hidden="true">#</a> 读已提交</h3><ol><li>当前事务只能读取到其他事务提交的数据。</li><li>解决了脏读。（不可重复读，幻读）</li><li>锁和读mvcc <ol><li>读不加锁，写加行锁，事务提交释放锁。</li><li>其他事务读的时候利用MVCC读取到其他事务已提交的数据。</li><li>每次读操作都更新一遍readview，所以可能导致两次读的数据不一致。</li></ol></li></ol><h3 id="可重复读" tabindex="-1"><a class="header-anchor" href="#可重复读" aria-hidden="true">#</a> 可重复读</h3><ol><li>限制读取数据时不能进行修改。</li><li>所以解决了重复读的问题。</li><li>但是读取数据时可以插入数据，所以会（幻读）。</li><li>锁 <ol><li><!----></li><li><!----></li></ol></li><li>读MVCC <ol><li><!---->隔离级别下是快照读。</li><li>创建事务的时候创建一个readview快照。</li><li>事务执行期间都是用这一个快照，不会看到其他事务插入的数据的，所以不会发生幻读。</li><li>在当前读中，mysql通过next-key避免幻读。 <ol><li>当前读就是读取最新数据。</li><li>select...lock in share mode, select... for update</li><li>或者增删改都进行当前读。</li><li>类似volatile，也就是读取最新值。</li></ol></li></ol></li></ol><h3 id="串行化" tabindex="-1"><a class="header-anchor" href="#串行化" aria-hidden="true">#</a> 串行化</h3><ol><li><p>所有事务是串行执行的。</p></li><li><!----></li><li><p>事务执行很耗性能。</p></li><li><!---->隔离级别下是快照读。</li><li><p>创建事务的时候创建一个readview快照。</p></li><li><p>事务执行期间都是用这一个快照，不会看到其他事务插入的数据的，所以不会发生幻读。因此<!---->只在当前读中发生（当前读就是读取最新数据，加锁的select...lock in share mode, select... for update，或者增删改都进行当前读，类似volatile），也就是读取最新值。</p></li></ol><h2 id="mvcc" tabindex="-1"><a class="header-anchor" href="#mvcc" aria-hidden="true">#</a> <!----></h2><p>m_ids:创建视图时当前数据库中活跃且未提交的事务的事务id列表。</p><p>creator_trx_id:创建该readview的事务id。</p><p>min_trx_id:创建readview时当前数据库中活跃且未提交事务的最小id。</p><p>max_trx_id:创建readview时当前数据库中应该给的下一个事务的id。</p><hr><p>每条数据有2个隐藏列：trx_id：事务id和回滚指针。</p><p>核心就2句话：</p><p>1、找到的数据trx_id和m_ids比较，如果不在m_ids，说明可读，否则都需要沿着版本链找。</p><p>2、读提交是每次读更新readview，可重复读是事务启动时创建readview不变。</p><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/22839467/1652600680214-c5a54bd2-5038-4086-a544-51969fb2ed52.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h1 id="·日志" tabindex="-1"><a class="header-anchor" href="#·日志" aria-hidden="true">#</a> ·日志</h1><h2 id="redo-log" tabindex="-1"><a class="header-anchor" href="#redo-log" aria-hidden="true">#</a> redo log</h2><ol><li>redolog是innoDB引擎特有的；</li><li>redolog是物理日志，记录的是“在某个数据页上做了什么修改”；</li><li>redolog是循环写，空间固定。会用完会覆盖之前的日志。</li><li><!---->是只会记录未刷盘的日志，已经刷盘的会从日志中删除，具有crash-safe能力。</li></ol><h3 id="为什么binlog没有crash-safe" tabindex="-1"><a class="header-anchor" href="#为什么binlog没有crash-safe" aria-hidden="true">#</a> 为什么binlog没有crash safe</h3><ol><li>当数据库crash后，想要恢复数据时，binlog是无法恢复的。</li><li>虽然binlog有全量的日志，但innodb不能判断哪些数据已经刷盘，哪些数据还没有。</li><li>但redolog不一样，只要刷入磁盘的数据，都会从redolog中抹去。</li><li>数据库重启后，直接把redolog中的数据都恢复至内存就可以了。</li></ol><h2 id="binlog" tabindex="-1"><a class="header-anchor" href="#binlog" aria-hidden="true">#</a> binlog</h2><ol><li>用来实现主从同步，高可用。</li><li>binlog是Mysql的server层实现的，所有引擎都可以使用。</li><li>binlog是逻辑日志，记录的是sql语句，ddl（数据定义语言）语句和dml（数据操纵语言）语句。比如“给ID=2这一行的c字段加1”</li><li>binlog是可以追加写入的，保存的是全量日志。“追加写”是指binlog文件写到一定大小后会切换到下一个，并不会覆盖以前的日志。</li></ol><p>binlog作用：</p><ol><li>灾难时的数据恢复 。</li><li>mysql的主从复制，mysql8版本中， 默认binlog是开启的。</li></ol><p>参数：show variables like &#39;%log_bin%&#39;</p><p>binlog和redolog可能会导致io影响到性能，可以通过设置参数，建设binlog和redolog的写入次数，不是每次事务提交都写。可能会有丢失数据的风险。</p><h2 id="undo-log" tabindex="-1"><a class="header-anchor" href="#undo-log" aria-hidden="true">#</a> undo log</h2><p>事务回滚，实现MVCC</p><ol><li>原子性由undolog保证。</li><li>也叫做回滚日志，可用于事务回滚。会记录数据被修改前的信息。</li><li>可以用于MVCC，undolog在<!---->，事务<!---->，会用于MVCC。。</li><li>是一种<!---->，当删除一条记录的时候，记录一条新增记录；当更新一条记录的时候，它记录一条相反的更新操作。</li></ol><h1 id="·锁" tabindex="-1"><a class="header-anchor" href="#·锁" aria-hidden="true">#</a> ·锁</h1><h2 id="分类-特点" tabindex="-1"><a class="header-anchor" href="#分类-特点" aria-hidden="true">#</a> 分类/特点</h2><p>分类：</p><ol><li><!----><!----><!----><!----><!----></li><li><!----><!----><!----></li></ol><!----><!----><p>innodb--select: mvcc不用加锁（但是serializable加行级读锁）</p><p>--改：行加写锁：①因为加锁是对索引加的，所以可能变成表锁。②范围可能会变成next-key lock</p><p>特点：</p><ol><li>加锁的话是在事务执行完毕时释放锁。单条update也是一个事务。</li><li>共享锁：也叫读锁，其他事务可以读，但不可以写。</li><li>排他锁：也叫写锁，其他事务不能读，也不能写。</li><li>表级锁：开销小，加锁比较快，锁的粒度大，并发度低，锁冲突的概率大。不会死锁。所以更适合以查询为主，并发用户小，少量更新。 <ol><li>意向锁：属于表锁。</li><li>意向共享锁IS：事务打算加行共享锁，需要先获取表的IS锁。</li><li>意向排他锁IX：事务给数据行加排他锁之前，需要先获取表的IX锁。</li></ol></li><li>行级锁：开销大，加锁慢，加锁粒度小，并发度较高，锁冲突的概率低。可能会发生死锁（锁是逐步获得的）。 <ol><li>行锁是给索引（索引项）加锁实现的，只有通过索引条件查询，才能使用行锁，否则使用表锁。</li></ol></li><li>next-key锁：使用范围条件查询或者更新时，符合条件的数据的索引会被加行锁，在范围内但是数据不存在的记录，叫做间隙，innodb也会对间隙加锁。比如 select * from table where id &gt;100,记录1-101，101符合条件会被加锁，大于101的间隙也会被加锁。 <ol><li>记录锁加在索引上。</li><li>间隙锁加在索引之间。</li></ol></li></ol><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/22839467/1664328273916-90280925-110a-4368-927f-f3ef596c588f.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="死锁" tabindex="-1"><a class="header-anchor" href="#死锁" aria-hidden="true">#</a> 死锁</h2><p>定义：</p><ol><li>当多用户并发读写数据时，产生多个事务同时存取数据的情况。</li><li>两个事务有一组冲突的锁，事务不能继续执行下去，会出现死锁。</li></ol><p>举例：</p><ol><li>用户A访问A表，然后又访问B表。用户B访问B表，然后访问A表。A和B会互相等待对方的锁，还持有原本持有的锁，会陷入僵持，也就死锁了。</li></ol><p>死锁：多个进程或者线程对共享资源争抢或者互相依赖，产生的一种不经过外力无法破除的一种现象。</p><p>四个必要条件：</p><p>互斥：资源是互斥访问的，如果被某个线程持有，其他线程只能等待。</p><p>请求和保持：发生阻塞时，当前持有的资源保持不放。</p><p>不可剥夺：当前进程未执行完时，所持有的资源不能被剥夺。</p><p>循环等待：进程之间循环等待资源。</p><p>破坏互斥条件：如果资源是共享资源，则不会发生死锁。但是有些资源是不允许共享访问的，比如键盘，可写文件，有些资源是可以共享访问的，比如只读文件和磁盘。所以破坏互斥条件只适合一部分资源。</p><p>破坏请求和保持条件：如果进程持有一部分资源且申请其他资源的时候由于它不会释放自己持有的资源，可能会发生死锁。可以在程序运行前把所有它需要的资源都分配给该进程，但是会造成资源的浪费。</p><p>破坏不可剥夺条件：方案一：当持有资源申请不到其他资源时，可以强迫其释放所持有的资源，需要时再次申请。方案二：当进程请求的资源被其他进程占有，由操作系统协调剥夺其他进程占有的资源。方案一是释放自己的，可能导致前期所做的工作失效。方案二是释放其他的，可能会导致其他进程前期所做的工作失效。</p><p>破坏循环等待条件：将资源按顺序编号，申请资源按顺序递增的方式申请。缺点是不易增加新的设备，用户编程麻烦。</p><h2 id="乐观锁-悲观锁" tabindex="-1"><a class="header-anchor" href="#乐观锁-悲观锁" aria-hidden="true">#</a> 乐观锁/悲观锁</h2><p>1、版本号机制</p><p>一般是说在数据表中加上一个数据库版本号version字段，在表述数据被修改的次数，当数据被修改时，它的version会加一。</p><p>当线程A需要更新数据值时，在读取数据的同时也会读取version值，在提交更新时，若刚才读取到的version值为当前数据库中的version值相等时才能更新，否则重试更新操作，直到更新成功。</p><p>库存超卖问题，库存就是个版本号。</p><p>2、CAS算法</p><p>cas是compare and swap比较并交换，有3个操作数，内存值V，预期值B，要替换的目标值A，CAS指令执行时，比较内存地址值V和预期值B是否相等，如果相等则将A复制给B，不相等则会循环比较知道相等，整个比较并赋值的操作是一个原子性的操作。</p><p>CAS缺点：</p><p>（1） 循环时间开销大，内存值V与预期值B不相等会一直循环比较知道相等。</p><p>（2）只能保证一个共享变量的原子操作</p><p>（3）如果一个变量V初次读取的时候值是A，并且在准备赋值的时候检查到它仍然是A值，但是这段时间不一定没有发生改变，如果它被修改成别的值，然后又改回了A，那CAS操作会认为它没有被修改过，这个问题就是CAS操作的“ABA”问题。</p><p>3、悲观锁</p><p>悲观锁是很悲观，每次拿数据都认为别人会修改，所以每次拿数据都会加锁。这样别人想拿数据会被阻塞直到获取到锁。</p><h2 id="两阶段锁" tabindex="-1"><a class="header-anchor" href="#两阶段锁" aria-hidden="true">#</a> 两阶段锁</h2><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/22839467/1664329111936-c7e52360-4ba3-452b-9576-5114508709f8.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>一个事务有两个更新语句，需要添加行锁，但并不是第一个更新执行完成后就释放锁，而是等事务都执行结束后才释放。</p><p>帮助：把影响并发度的锁尽量放后面，因为放前面它加锁后不释放可能会影响后面的运行。提高并发度。</p><h1 id="·sql" tabindex="-1"><a class="header-anchor" href="#·sql" aria-hidden="true">#</a> ·sql</h1><p>时间类型：datetime，timestamp，date</p><p>select <!---->, avg(score) from sc group by no;</p><p>group by no就是no<!---->。</p><p>no-score no-avg(score)</p><p>1--20 1---25</p><p>1--30 2---30</p><p>2--10</p><p>2--50</p><p>select *,row_number() over (partition by c_id order by s_score) from score;</p><p>partition by的字段都<!---->，然后按照order by的排序，在给出row number。</p><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/22839467/1655452238021-1d58bee6-9969-4c0a-b9f9-0027e767b6c0.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>select * ,row_number() over (partition by c_id,(case when s_score&gt;70 then 1 else 0 end) order by s_score) from score;</p><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/22839467/1655452469160-c1a0161d-5008-499f-9b03-cff0811e00d2.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>查询连续7天登录</p><figure><img src="https://cdn.nlark.com/yuque/0/2022/png/22839467/1655453673423-30b3fe0b-a6d3-41f4-8174-503354f33a2d.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> name<span class="token punctuation">,</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token keyword">day</span><span class="token punctuation">)</span>
<span class="token keyword">from</span> <span class="token punctuation">(</span><span class="token keyword">select</span> name<span class="token punctuation">,</span> <span class="token keyword">date</span><span class="token punctuation">(</span>createtime<span class="token punctuation">)</span> <span class="token operator">-</span> row_number<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">over</span> <span class="token punctuation">(</span><span class="token keyword">partition</span> <span class="token keyword">by</span> name <span class="token keyword">order</span> <span class="token keyword">by</span> createtime<span class="token punctuation">)</span> <span class="token keyword">day</span>
                  <span class="token keyword">from</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token keyword">distinct</span> name<span class="token punctuation">,</span> DATE_FORMAT<span class="token punctuation">(</span><span class="token keyword">date</span><span class="token punctuation">,</span> <span class="token string">&#39;%Y-%m-%d&#39;</span><span class="token punctuation">)</span> createtime
                        <span class="token keyword">from</span> table_name<span class="token punctuation">)</span> t1<span class="token punctuation">)</span> t2
<span class="token keyword">group</span> <span class="token keyword">by</span> name<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/fuzhengwei/xfg-resume-blog/edit/main/src/tech/database/mysql.md" rel="noopener noreferrer" target="_blank" aria-label="在 GitHub 上编辑此页" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->在 GitHub 上编辑此页<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><!----><!----></div></footer><nav class="vp-page-nav"><a aria-label="数据库" class="vp-link nav-link active prev nav-link active prev" href="/tech/database/"><div class="hint"><span class="arrow start"></span>上一页</div><div class="link"><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span>数据库</div></a><a aria-label="Redis(上)" class="vp-link nav-link next nav-link next" href="/tech/database/redis1.html"><div class="hint">下一页<span class="arrow end"></span></div><div class="link">Redis(上)<span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer">txy</div><!----></footer></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app-9393c1ef.js" defer></script>
  </body>
</html>
